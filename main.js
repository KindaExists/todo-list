(()=>{let e,t=[];const d=function(d){const n=(e=>{let t=[];return{addTodo:e=>{t.push(e)},getTodos:()=>t,title:e,deleteTodo:e=>{t.splice(t.indexOf(e),1)}}})(d);e=n,t.push(n),o.renderProjectPanel()},n=function(e,t,d,n,i,s){todoList=e.getTodos();const c=((e,t,d,n,o)=>{const i={title:e,dueDate:t,priority:d,isDone:n,description:o,switchDone:()=>{i.isDone=!i.isDone}};return i})(t,d,n,i,s);e.addTodo(c),o.renderTodosPanel(e)},o=(()=>{const e=document.querySelector("#project_list"),d=document.querySelector("#todo_list");return{renderProjectPanel:function(){e.textContent="",t.forEach((t=>{!function(t){const d=i.buildProject(t);e.appendChild(d)}(t)}))},renderTodosPanel:function(e){d.textContent="",e.getTodos().forEach((e=>{!function(e){const t=i.buildTodo(e);d.appendChild(t)}(e)}))}}})(),i=(()=>{function d(e,t,d,n){e.addEventListener("dblclick",(()=>{e.classList.add("hidden"),t.classList.remove("hidden"),t.focus()})),t.addEventListener("change",(()=>{d[n]=t.value,e.textContent=t.value?t.value:"No Info",e.classList.remove("hidden"),t.classList.add("hidden")}))}function n(e,t=null,d=null,n=null){const o=document.createElement(e);return t&&o.classList.add(...t),d&&c(o,d),n&&(o.textContent=n),o}function i(e,t=null,d=null,n=null){const o=document.createElement("input");return o.type=e,t&&("checkbox"===e?o.checked=t:o.value=t),d&&o.classList.add(...d),n&&c(o,n),o}function s(e){const t=document.createElement("i");return t.classList.add("fas",`fa-${e}`),t}function c(e,t){t.forEach((t=>{e.appendChild(t)}))}return{buildTodo:function(t){const c=i("checkbox",t.isDone,["checkbox"]),r=n("p",void 0,void 0,t.title),a=i("text",t.title,["todo-form-text","hidden"]);a.required;const l=n("p",void 0,void 0,t.dueDate?t.dueDate:"No Info"),u=i("date",t.dueDate,["todo-form-text","hidden"]),v=n("p",void 0,void 0,t.priority?t.priority:"No Info"),h=n("option",void 0,void 0,"Low");h.value="Low";const L=n("option",void 0,void 0,"Medium");L.value="Medium";const p=n("option",void 0,void 0,"High");p.value="High";const m=n("select",["todo-form-text","hidden"],[h,L,p]),f=n("button",["todo-btn"],[s("caret-down")]),E=n("button",["todo-btn"],[s("trash-alt")]),b=n("p",void 0,void 0,t.description?t.description:"No Info"),k=n("textarea",["todo-form-desc-area","hidden"],void 0,t.description),x=n("div",["todo-desc","hidden"],[b,k]);d(r,a,t,"title"),d(l,u,t,"dueDate"),d(v,m,t,"priority"),d(b,k,t,"description"),c.addEventListener("change",t.switchDone),E.addEventListener("click",(()=>{e.deleteTodo(t),o.renderTodosPanel(e)})),f.addEventListener("click",(()=>{x.classList.toggle("hidden")}));const y=n("div",["todo-content"],[c,r,a,l,u,v,m,f,E]),j=n("div",["todo"],[y,x]);return j.addEventListener("focusout",(()=>{r.classList.remove("hidden"),a.classList.add("hidden"),l.classList.remove("hidden"),u.classList.add("hidden"),v.classList.remove("hidden"),m.classList.add("hidden"),b.classList.remove("hidden"),k.classList.add("hidden")})),j},buildProject:function(d){const c=n("button",["proj-btn","sel-btn"],void 0,d.title),r=i("text",d.title,["proj-form-text","hidden"]);r.required;const a=n("button",["proj-btn","edit-btn"],[s("edit")]),l=n("button",["proj-btn","del-btn"],[s("trash-alt")]);return a.addEventListener("click",(()=>{c.classList.add("hidden"),r.classList.remove("hidden"),r.focus()})),c.addEventListener("click",(()=>{e=d,o.renderTodosPanel(d)})),r.addEventListener("change",(()=>{d.title=r.value,c.textContent=r.value,c.classList.remove("hidden"),r.classList.add("hidden")})),r.addEventListener("focusout",(()=>{c.classList.remove("hidden"),r.classList.add("hidden")})),r.addEventListener("keydown",(e=>{"Escape"===e.key&&(c.classList.remove("hidden"),r.classList.add("hidden"))})),l.addEventListener("click",(()=>{console.log(t),t.splice(t.indexOf(e),1),e=null,o.renderProjectPanel()})),n("div",["proj"],[c,r,a,l])}}})(),s=document.forms.todoForm,c=document.querySelector("#new_todo"),r=document.forms.projForm,a=document.querySelector("#new_proj");a.addEventListener("click",(()=>{a.classList.add("hidden"),r.parentNode.classList.remove("hidden"),r.children[0].focus()})),r.addEventListener("keydown",(e=>{"Escape"===e.key&&(a.classList.remove("hidden"),r.parentNode.classList.add("hidden"),r.reset())})),r.addEventListener("submit",(()=>{a.classList.remove("hidden"),r.parentNode.classList.add("hidden"),d(r.title.value),r.reset()})),c.addEventListener("click",(()=>{c.classList.add("hidden"),s.parentNode.classList.remove("hidden")})),s.addEventListener("reset",(()=>{c.classList.remove("hidden"),s.parentNode.classList.add("hidden")})),s.addEventListener("keydown",(e=>{"Escape"===e.key&&(c.classList.remove("hidden"),s.parentNode.classList.add("hidden"))})),s.addEventListener("submit",(()=>{c.classList.remove("hidden"),s.parentNode.classList.add("hidden"),n(e,s.title.value,s.date.value,s.priority.value,s.done.checked,s.desc.value),s.reset()})),d("Proj 1")})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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U0FBUyxHQUFHTCxXQUd6QjRDLEVBQVNoRCxpQkFBaUIsV0FBWXlDLElBQ25CLFdBQVpBLEVBQUlDLE1BQ0hPLEVBQVloRCxVQUFVRSxPQUFPLFVBQzdCNkMsRUFBU0UsV0FBV2pELFVBQVVDLElBQUksVUFDbEM4QyxFQUFTRyxZQUlqQkgsRUFBU2hELGlCQUFpQixVQUFVLEtBQ2hDaUQsRUFBWWhELFVBQVVFLE9BQU8sVUFDN0I2QyxFQUFTRSxXQUFXakQsVUFBVUMsSUFBSSxVQUVsQzVDLEVBQTBCMEYsRUFBZ0IsTUFBRTNDLE9BRTVDMkMsRUFBU0csV0FJYkosRUFBWS9DLGlCQUFpQixTQUFTLEtBQ2xDK0MsRUFBWTlDLFVBQVVDLElBQUksVUFDMUIyQyxFQUFTSyxXQUFXakQsVUFBVUUsT0FBTyxhQUd6QzBDLEVBQVM3QyxpQkFBaUIsU0FBUyxLQUMvQitDLEVBQVk5QyxVQUFVRSxPQUFPLFVBQzdCMEMsRUFBU0ssV0FBV2pELFVBQVVDLElBQUksYUFHdEMyQyxFQUFTN0MsaUJBQWlCLFdBQVl5QyxJQUNuQixXQUFaQSxFQUFJQyxNQUNISyxFQUFZOUMsVUFBVUUsT0FBTyxVQUM3QjBDLEVBQVNLLFdBQVdqRCxVQUFVQyxJQUFJLGNBSTFDMkMsRUFBUzdDLGlCQUFpQixVQUFVLEtBQ2hDK0MsRUFBWTlDLFVBQVVFLE9BQU8sVUFDN0IwQyxFQUFTSyxXQUFXakQsVUFBVUMsSUFBSSxVQUVsQzVDLEVBQXVCRixFQUNBeUYsRUFBZ0IsTUFBRXhDLE1BQ2xCd0MsRUFBZSxLQUFFeEMsTUFDakJ3QyxFQUFtQixTQUFFeEMsTUFDckJ3QyxFQUFlLEtBQUU5QixRQUNqQjhCLEVBQWUsS0FBRXhDLE9BR3hDd0MsRUFBU00sV0FNYjdGLEVBQTBCLFciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiXG5sZXQgcHJvanMgPSBbXTtcbmxldCBzZWxlY3RlZFByb2o7XG5cbmNvbnN0IFRvZG8gPSAodGl0bGUsIGR1ZURhdGUsIHByaW9yaXR5LCBpc0RvbmUsIGRlc2NyaXB0aW9uKSA9PiB7XG4gICAgY29uc3Qgc3dpdGNoRG9uZSA9ICgpID0+IHtcbiAgICAgICAgcmV0cy5pc0RvbmUgPSAhcmV0cy5pc0RvbmVcbiAgICB9XG5cbiAgICBjb25zdCByZXRzID0ge1xuICAgICAgICB0aXRsZSwgZHVlRGF0ZSwgcHJpb3JpdHksIGlzRG9uZSwgZGVzY3JpcHRpb24sXG4gICAgICAgIHN3aXRjaERvbmUsXG4gICAgfTtcbiAgICByZXR1cm4gcmV0cztcbn07XG5cbmNvbnN0IFByb2plY3QgPSAodGl0bGUpID0+IHtcbiAgICBsZXQgX3RvZG9zID0gW107XG5cbiAgICBjb25zdCBhZGRUb2RvID0gdG9kbyA9PiB7XG4gICAgICAgIF90b2Rvcy5wdXNoKHRvZG8pO1xuICAgIH07XG5cbiAgICBjb25zdCBnZXRUb2RvcyA9ICgpID0+IF90b2RvcztcblxuICAgIGNvbnN0IGRlbGV0ZVRvZG8gPSAodG9kbykgPT4ge1xuICAgICAgICBfdG9kb3Muc3BsaWNlKF90b2Rvcy5pbmRleE9mKHRvZG8pLCAxKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgYWRkVG9kbywgZ2V0VG9kb3MsIHRpdGxlLCBkZWxldGVUb2RvXG4gICAgfTtcbn07XG5cblxuY29uc3QgTWFpbkNvbnRyb2xsZXIgPSAoKCkgPT4ge1xuICAgIGZ1bmN0aW9uIG5ld1RvZG8ocHJvaiwgdGl0bGUsIGRhdGUsIHByaW9yaXR5LCBpc0RvbmUsIGRlc2MpIHtcbiAgICAgICAgdG9kb0xpc3QgPSBwcm9qLmdldFRvZG9zKCk7XG4gICAgICAgIGNvbnN0IHRvZG8gPSBUb2RvKHRpdGxlLCBkYXRlLCBwcmlvcml0eSwgaXNEb25lLCBkZXNjKTtcbiAgICAgICAgcHJvai5hZGRUb2RvKHRvZG8pO1xuXG4gICAgICAgIERpc3BsYXkucmVuZGVyVG9kb3NQYW5lbChwcm9qKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBuZXdQcm9qZWN0KHRpdGxlKSB7XG4gICAgICAgIGNvbnN0IHByb2ogPSBQcm9qZWN0KHRpdGxlKTtcbiAgICAgICAgc2VsZWN0ZWRQcm9qID0gcHJvajtcbiAgICAgICAgcHJvanMucHVzaChwcm9qKTtcblxuICAgICAgICBEaXNwbGF5LnJlbmRlclByb2plY3RQYW5lbCgpO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIG5ld1Byb2plY3QsIG5ld1RvZG9cbiAgICB9O1xufSkoKTtcblxuXG5jb25zdCBEaXNwbGF5ID0gKCgpID0+IHtcbiAgICBjb25zdCBwcm9qTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcm9qZWN0X2xpc3QnKTtcbiAgICBjb25zdCB0b2RvTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0b2RvX2xpc3QnKTtcblxuICAgIGZ1bmN0aW9uIF9kaXNwbGF5VG9kbyh0b2RvKSB7XG4gICAgICAgIGNvbnN0IHRvZG9PYmogPSBFbGVtZW50QnVpbGRlci5idWlsZFRvZG8odG9kbyk7XG4gICAgICAgIHRvZG9MaXN0LmFwcGVuZENoaWxkKHRvZG9PYmopO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlbmRlclRvZG9zUGFuZWwocHJvaikge1xuICAgICAgICB0b2RvTGlzdC50ZXh0Q29udGVudCA9ICcnO1xuICAgICAgICBwcm9qLmdldFRvZG9zKCkuZm9yRWFjaCh0b2RvID0+IHtcbiAgICAgICAgICAgIF9kaXNwbGF5VG9kbyh0b2RvKVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBfZGlzcGxheVByb2plY3QocHJvaikge1xuICAgICAgICBjb25zdCBwcm9qT2JqID0gRWxlbWVudEJ1aWxkZXIuYnVpbGRQcm9qZWN0KHByb2opO1xuICAgICAgICBwcm9qTGlzdC5hcHBlbmRDaGlsZChwcm9qT2JqKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZW5kZXJQcm9qZWN0UGFuZWwoKSB7XG4gICAgICAgIHByb2pMaXN0LnRleHRDb250ZW50ID0gJyc7XG4gICAgICAgIHByb2pzLmZvckVhY2gocHJvaiA9PiB7XG4gICAgICAgICAgICBfZGlzcGxheVByb2plY3QocHJvailcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVuZGVyUHJvamVjdFBhbmVsLCByZW5kZXJUb2Rvc1BhbmVsXG4gICAgfTtcbn0pKCk7XG5cblxuY29uc3QgRWxlbWVudEJ1aWxkZXIgPSAoKCkgPT4ge1xuICAgIGZ1bmN0aW9uIGJ1aWxkVG9kbyh0b2RvKSB7XG4gICAgICAgIGNvbnN0IGRvbmVDYm94ID0gX25ld0lucHV0KCdjaGVja2JveCcsIHRvZG8uaXNEb25lLCBbJ2NoZWNrYm94J10pO1xuXG4gICAgICAgIGNvbnN0IHRpdGxlID0gX25ld0VsZW1lbnQoJ3AnLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdG9kby50aXRsZSk7XG4gICAgICAgIGNvbnN0IHRpdGxlSW5wdXQgPSBfbmV3SW5wdXQoJ3RleHQnLCB0b2RvLnRpdGxlLCBbJ3RvZG8tZm9ybS10ZXh0JywgJ2hpZGRlbiddKTtcbiAgICAgICAgdGl0bGVJbnB1dC5yZXF1aXJlZDtcblxuICAgICAgICBjb25zdCBkdWVEYXRlID0gX25ld0VsZW1lbnQoJ3AnLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgKHRvZG8uZHVlRGF0ZSkgPyB0b2RvLmR1ZURhdGUgOiAnTm8gSW5mbycpO1xuICAgICAgICBjb25zdCBkdWVEYXRlSW5wdXQgPSBfbmV3SW5wdXQoJ2RhdGUnLCB0b2RvLmR1ZURhdGUsIFsndG9kby1mb3JtLXRleHQnLCAnaGlkZGVuJ10pO1xuXG5cbiAgICAgICAgY29uc3QgcHJpb3JpdHkgPSBfbmV3RWxlbWVudCgncCcsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCAodG9kby5wcmlvcml0eSkgPyB0b2RvLnByaW9yaXR5IDogJ05vIEluZm8nKTtcblxuICAgICAgICBjb25zdCBzZWxlY3RMb3cgPSBfbmV3RWxlbWVudCgnb3B0aW9uJywgdW5kZWZpbmVkLCB1bmRlZmluZWQsICdMb3cnKTtcbiAgICAgICAgc2VsZWN0TG93LnZhbHVlID0gJ0xvdyc7XG4gICAgICAgIGNvbnN0IHNlbGVjdE1lZCA9IF9uZXdFbGVtZW50KCdvcHRpb24nLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgJ01lZGl1bScpO1xuICAgICAgICBzZWxlY3RNZWQudmFsdWUgPSAnTWVkaXVtJztcbiAgICAgICAgY29uc3Qgc2VsZWN0SGlnaCA9IF9uZXdFbGVtZW50KCdvcHRpb24nLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgJ0hpZ2gnKTtcbiAgICAgICAgc2VsZWN0SGlnaC52YWx1ZSA9ICdIaWdoJztcbiAgICAgICAgY29uc3QgcHJpb3JpdHlJbnB1dCA9IF9uZXdFbGVtZW50KCdzZWxlY3QnLCBbJ3RvZG8tZm9ybS10ZXh0JywgJ2hpZGRlbiddLCBbc2VsZWN0TG93LCBzZWxlY3RNZWQsIHNlbGVjdEhpZ2hdKTtcblxuXG4gICAgICAgIGNvbnN0IGRlc2NJY29uID0gX25ld0ljb24oJ2NhcmV0LWRvd24nKTtcbiAgICAgICAgY29uc3QgZGVzY0J0biA9IF9uZXdFbGVtZW50KCdidXR0b24nLCBbJ3RvZG8tYnRuJ10sIFtkZXNjSWNvbl0pO1xuXG4gICAgICAgIGNvbnN0IGRlbEljb24gPSBfbmV3SWNvbigndHJhc2gtYWx0Jyk7XG4gICAgICAgIGNvbnN0IGRlbEJ0biA9IF9uZXdFbGVtZW50KCdidXR0b24nLCBbJ3RvZG8tYnRuJ10sIFtkZWxJY29uXSk7XG5cblxuICAgICAgICBjb25zdCBkZXNjVGV4dCA9IF9uZXdFbGVtZW50KCdwJywgdW5kZWZpbmVkLCB1bmRlZmluZWQsICh0b2RvLmRlc2NyaXB0aW9uKSA/IHRvZG8uZGVzY3JpcHRpb24gOiAnTm8gSW5mbycpO1xuICAgICAgICBjb25zdCBkZXNjSW5wdXQgPSBfbmV3RWxlbWVudCgndGV4dGFyZWEnLCBbJ3RvZG8tZm9ybS1kZXNjLWFyZWEnLCAnaGlkZGVuJ10sIHVuZGVmaW5lZCwgdG9kby5kZXNjcmlwdGlvbik7XG5cbiAgICAgICAgY29uc3QgdG9kb0Rlc2MgPSBfbmV3RWxlbWVudCgnZGl2JywgWyd0b2RvLWRlc2MnLCAnaGlkZGVuJ10sIFtkZXNjVGV4dCwgZGVzY0lucHV0XSk7XG5cblxuICAgICAgICAvLyBUb2RvIEV2ZW50bGlzdGVuZXJzXG4gICAgICAgIF9hZGRFZGl0RXZlbnQodGl0bGUsIHRpdGxlSW5wdXQsIHRvZG8sICd0aXRsZScpXG4gICAgICAgIF9hZGRFZGl0RXZlbnQoZHVlRGF0ZSwgZHVlRGF0ZUlucHV0LCB0b2RvLCAnZHVlRGF0ZScpXG4gICAgICAgIF9hZGRFZGl0RXZlbnQocHJpb3JpdHksIHByaW9yaXR5SW5wdXQsIHRvZG8sICdwcmlvcml0eScpXG4gICAgICAgIF9hZGRFZGl0RXZlbnQoZGVzY1RleHQsIGRlc2NJbnB1dCwgdG9kbywgJ2Rlc2NyaXB0aW9uJylcblxuXG4gICAgICAgIGRvbmVDYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHRvZG8uc3dpdGNoRG9uZSk7XG5cbiAgICAgICAgZGVsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgc2VsZWN0ZWRQcm9qLmRlbGV0ZVRvZG8odG9kbyk7XG4gICAgICAgICAgICBEaXNwbGF5LnJlbmRlclRvZG9zUGFuZWwoc2VsZWN0ZWRQcm9qKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGRlc2NCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICB0b2RvRGVzYy5jbGFzc0xpc3QudG9nZ2xlKCdoaWRkZW4nKTtcbiAgICAgICAgfSk7XG5cblxuICAgICAgICBjb25zdCB0b2RvQ29udGVudCA9IF9uZXdFbGVtZW50KCdkaXYnLFxuICAgICAgICAgICAgICAgIFsndG9kby1jb250ZW50J10sIFtkb25lQ2JveCxcbiAgICAgICAgICAgICAgICB0aXRsZSwgdGl0bGVJbnB1dCxcbiAgICAgICAgICAgICAgICBkdWVEYXRlLCBkdWVEYXRlSW5wdXQsXG4gICAgICAgICAgICAgICAgcHJpb3JpdHksIHByaW9yaXR5SW5wdXQsXG4gICAgICAgICAgICAgICAgZGVzY0J0biwgZGVsQnRuXSk7XG5cbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gX25ld0VsZW1lbnQoJ2RpdicsIFsndG9kbyddLCBbdG9kb0NvbnRlbnQsIHRvZG9EZXNjXSk7XG4gICAgICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdmb2N1c291dCcsICgpID0+IHtcbiAgICAgICAgICAgIHRpdGxlLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgICAgICAgICAgdGl0bGVJbnB1dC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcblxuICAgICAgICAgICAgZHVlRGF0ZS5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICAgICAgICAgIGR1ZURhdGVJbnB1dC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcblxuICAgICAgICAgICAgcHJpb3JpdHkuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgICAgICAgICBwcmlvcml0eUlucHV0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXG5cbiAgICAgICAgICAgIGRlc2NUZXh0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgICAgICAgICAgZGVzY0lucHV0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gY29udGFpbmVyO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIF9hZGRFZGl0RXZlbnQoZWxlbWVudCwgaW5wdXQsIHRvZG8sIHRvZG9OYW1lKSB7XG4gICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZGJsY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgICAgICAgICAgaW5wdXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgICAgICAgICBpbnB1dC5mb2N1cygpO1xuICAgICAgICB9KTtcbiAgICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4ge1xuICAgICAgICAgICAgdG9kb1t0b2RvTmFtZV0gPSBpbnB1dC52YWx1ZTtcbiAgICAgICAgICAgIGVsZW1lbnQudGV4dENvbnRlbnQgPSAoaW5wdXQudmFsdWUpID8gaW5wdXQudmFsdWUgOiAnTm8gSW5mbyc7XG5cbiAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgICAgICAgICBpbnB1dC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYnVpbGRQcm9qZWN0KHByb2opIHtcbiAgICAgICAgY29uc3Qgc2VsQnRuID0gX25ld0VsZW1lbnQoJ2J1dHRvbicsIFsncHJvai1idG4nLCAnc2VsLWJ0biddLCB1bmRlZmluZWQsIHByb2oudGl0bGUpO1xuICAgICAgICBjb25zdCBzZWxJbnB1dCA9IF9uZXdJbnB1dCgndGV4dCcsIHByb2oudGl0bGUsIFsncHJvai1mb3JtLXRleHQnLCAnaGlkZGVuJ10pO1xuICAgICAgICBzZWxJbnB1dC5yZXF1aXJlZDtcblxuICAgICAgICBjb25zdCBlZGl0SWNvbiA9IF9uZXdJY29uKCdlZGl0Jyk7XG4gICAgICAgIGNvbnN0IGVkaXRCdG4gPSBfbmV3RWxlbWVudCgnYnV0dG9uJywgWydwcm9qLWJ0bicsICdlZGl0LWJ0biddLCBbZWRpdEljb25dKVxuXG4gICAgICAgIGNvbnN0IGRlbEljb24gPSBfbmV3SWNvbigndHJhc2gtYWx0Jyk7XG4gICAgICAgIGNvbnN0IGRlbEJ0biA9IF9uZXdFbGVtZW50KCdidXR0b24nLCBbJ3Byb2otYnRuJywgJ2RlbC1idG4nXSwgW2RlbEljb25dKVxuXG4gICAgICAgIGVkaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBzZWxCdG4uY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICAgICAgICBzZWxJbnB1dC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICAgICAgICAgIHNlbElucHV0LmZvY3VzKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHNlbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIHNlbGVjdGVkUHJvaiA9IHByb2o7XG4gICAgICAgICAgICBEaXNwbGF5LnJlbmRlclRvZG9zUGFuZWwocHJvailcbiAgICAgICAgfSk7XG5cbiAgICAgICAgc2VsSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4ge1xuICAgICAgICAgICAgcHJvai50aXRsZSA9IHNlbElucHV0LnZhbHVlO1xuICAgICAgICAgICAgc2VsQnRuLnRleHRDb250ZW50ID0gc2VsSW5wdXQudmFsdWU7XG5cbiAgICAgICAgICAgIHNlbEJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICAgICAgICAgIHNlbElucHV0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgICAgICB9KTtcblxuICAgICAgICBzZWxJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdmb2N1c291dCcsICgpID0+IHtcbiAgICAgICAgICAgIHNlbEJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICAgICAgICAgIHNlbElucHV0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgICAgICB9KTtcblxuICAgICAgICBzZWxJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGV2dCkgPT4ge1xuICAgICAgICAgICAgaWYoZXZ0LmtleSA9PT0gJ0VzY2FwZScpIHtcbiAgICAgICAgICAgICAgICBzZWxCdG4uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgICAgICAgICAgICAgc2VsSW5wdXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGRlbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHByb2pzKTtcbiAgICAgICAgICAgIHByb2pzLnNwbGljZShwcm9qcy5pbmRleE9mKHNlbGVjdGVkUHJvaiksIDEpO1xuICAgICAgICAgICAgc2VsZWN0ZWRQcm9qPW51bGw7XG4gICAgICAgICAgICBEaXNwbGF5LnJlbmRlclByb2plY3RQYW5lbCgpO1xuICAgICAgICB9KTtcblxuXG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IF9uZXdFbGVtZW50KCdkaXYnLCBbJ3Byb2onXSwgW3NlbEJ0biwgc2VsSW5wdXQsIGVkaXRCdG4sIGRlbEJ0bl0pO1xuXG4gICAgICAgIHJldHVybiBjb250YWluZXI7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gX25ld0VsZW1lbnQodGFnLCBjbGFzc2VzPW51bGwsIGNoaWxkcmVuPW51bGwsIHRleHQ9bnVsbCkge1xuICAgICAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWcpO1xuXG4gICAgICAgIGlmKGNsYXNzZXMpIHtcbiAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCguLi5jbGFzc2VzKTtcbiAgICAgICAgfVxuICAgICAgICBpZihjaGlsZHJlbikge1xuICAgICAgICAgICAgX2FwcGVuZENoaWxkcmVuKGVsZW1lbnQsIGNoaWxkcmVuKTtcbiAgICAgICAgfVxuICAgICAgICBpZih0ZXh0KSB7XG4gICAgICAgICAgICBlbGVtZW50LnRleHRDb250ZW50ID0gdGV4dDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBlbGVtZW50O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIF9uZXdJbnB1dCh0eXBlLCB2YWx1ZT1udWxsLCBjbGFzc2VzPW51bGwsIGNoaWxkcmVuPW51bGwpIHtcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgICAgIGVsZW1lbnQudHlwZSA9IHR5cGU7XG5cbiAgICAgICAgaWYodmFsdWUpIHtcbiAgICAgICAgICAgIGlmKHR5cGUgPT09ICdjaGVja2JveCcpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LmNoZWNrZWQgPSB2YWx1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudC52YWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmKGNsYXNzZXMpIHtcbiAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCguLi5jbGFzc2VzKTtcbiAgICAgICAgfVxuICAgICAgICBpZihjaGlsZHJlbikge1xuICAgICAgICAgICAgX2FwcGVuZENoaWxkcmVuKGVsZW1lbnQsIGNoaWxkcmVuKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBlbGVtZW50O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIF9uZXdJY29uKGljb25OYW1lKSB7XG4gICAgICAgIGNvbnN0IGljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpJyk7XG4gICAgICAgIGljb24uY2xhc3NMaXN0LmFkZCgnZmFzJywgYGZhLSR7aWNvbk5hbWV9YCk7XG5cbiAgICAgICAgcmV0dXJuIGljb247XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gX2FwcGVuZENoaWxkcmVuKHBhcmVudCwgY2hpbGRyZW4pIHtcbiAgICAgICAgY2hpbGRyZW4uZm9yRWFjaChjaGlsZCA9PiB7XG4gICAgICAgICAgICBwYXJlbnQuYXBwZW5kQ2hpbGQoY2hpbGQpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBidWlsZFRvZG8sIGJ1aWxkUHJvamVjdFxuICAgIH07XG59KSgpO1xuXG5cbmNvbnN0IHRvZG9Gb3JtID0gZG9jdW1lbnQuZm9ybXMudG9kb0Zvcm07XG5jb25zdCB0b2RvT3BlbkJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNuZXdfdG9kbycpO1xuXG5jb25zdCBwcm9qRm9ybSA9IGRvY3VtZW50LmZvcm1zLnByb2pGb3JtO1xuY29uc3QgcHJvak9wZW5CdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbmV3X3Byb2onKTtcblxucHJvak9wZW5CdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgcHJvak9wZW5CdG4uY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgcHJvakZvcm0ucGFyZW50Tm9kZS5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICBwcm9qRm9ybS5jaGlsZHJlblswXS5mb2N1cygpO1xufSk7XG5cbnByb2pGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZXZ0KSA9PiB7XG4gICAgaWYoZXZ0LmtleSA9PT0gJ0VzY2FwZScpIHtcbiAgICAgICAgcHJvak9wZW5CdG4uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgICAgIHByb2pGb3JtLnBhcmVudE5vZGUuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICAgIHByb2pGb3JtLnJlc2V0KCk7XG4gICAgfVxufSk7XG5cbnByb2pGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsICgpID0+IHtcbiAgICBwcm9qT3BlbkJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICBwcm9qRm9ybS5wYXJlbnROb2RlLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuXG4gICAgTWFpbkNvbnRyb2xsZXIubmV3UHJvamVjdChwcm9qRm9ybVsndGl0bGUnXS52YWx1ZSk7XG5cbiAgICBwcm9qRm9ybS5yZXNldCgpO1xufSk7XG5cblxudG9kb09wZW5CdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgdG9kb09wZW5CdG4uY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgdG9kb0Zvcm0ucGFyZW50Tm9kZS5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbn0pO1xuXG50b2RvRm9ybS5hZGRFdmVudExpc3RlbmVyKCdyZXNldCcsICgpID0+IHtcbiAgICB0b2RvT3BlbkJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICB0b2RvRm9ybS5wYXJlbnROb2RlLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xufSk7XG5cbnRvZG9Gb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZXZ0KSA9PiB7XG4gICAgaWYoZXZ0LmtleSA9PT0gJ0VzY2FwZScpIHtcbiAgICAgICAgdG9kb09wZW5CdG4uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgICAgIHRvZG9Gb3JtLnBhcmVudE5vZGUuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgfVxufSk7XG5cbnRvZG9Gb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsICgpID0+IHtcbiAgICB0b2RvT3BlbkJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICB0b2RvRm9ybS5wYXJlbnROb2RlLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuXG4gICAgTWFpbkNvbnRyb2xsZXIubmV3VG9kbyhzZWxlY3RlZFByb2osXG4gICAgICAgICAgICAgICAgICAgICAgICAgICB0b2RvRm9ybVsndGl0bGUnXS52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvZG9Gb3JtWydkYXRlJ10udmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICB0b2RvRm9ybVsncHJpb3JpdHknXS52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvZG9Gb3JtWydkb25lJ10uY2hlY2tlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvZG9Gb3JtWydkZXNjJ10udmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuXG4gICAgdG9kb0Zvcm0ucmVzZXQoKTtcbn0pO1xuXG5cblxuXG5NYWluQ29udHJvbGxlci5uZXdQcm9qZWN0KCdQcm9qIDEnKVxuLy8gTWFpbkNvbnRyb2xsZXIubmV3VG9kbyhzZWxlY3RlZFByb2osICdUb2RvIDEnLCAnMDAvMDAvMDAwMCcsICdIaWdoJywgdHJ1ZSwgJ0hlbGxvIFdvcmxkIScpIl0sIm5hbWVzIjpbInNlbGVjdGVkUHJvaiIsInByb2pzIiwiTWFpbkNvbnRyb2xsZXIiLCJ0aXRsZSIsInByb2oiLCJfdG9kb3MiLCJhZGRUb2RvIiwidG9kbyIsInB1c2giLCJnZXRUb2RvcyIsImRlbGV0ZVRvZG8iLCJzcGxpY2UiLCJpbmRleE9mIiwiUHJvamVjdCIsIkRpc3BsYXkiLCJyZW5kZXJQcm9qZWN0UGFuZWwiLCJkYXRlIiwicHJpb3JpdHkiLCJpc0RvbmUiLCJkZXNjIiwidG9kb0xpc3QiLCJkdWVEYXRlIiwiZGVzY3JpcHRpb24iLCJyZXRzIiwic3dpdGNoRG9uZSIsIlRvZG8iLCJyZW5kZXJUb2Rvc1BhbmVsIiwicHJvakxpc3QiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJ0ZXh0Q29udGVudCIsImZvckVhY2giLCJwcm9qT2JqIiwiRWxlbWVudEJ1aWxkZXIiLCJidWlsZFByb2plY3QiLCJhcHBlbmRDaGlsZCIsIl9kaXNwbGF5UHJvamVjdCIsInRvZG9PYmoiLCJidWlsZFRvZG8iLCJfZGlzcGxheVRvZG8iLCJfYWRkRWRpdEV2ZW50IiwiZWxlbWVudCIsImlucHV0IiwidG9kb05hbWUiLCJhZGRFdmVudExpc3RlbmVyIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwiZm9jdXMiLCJ2YWx1ZSIsIl9uZXdFbGVtZW50IiwidGFnIiwiY2xhc3NlcyIsImNoaWxkcmVuIiwidGV4dCIsImNyZWF0ZUVsZW1lbnQiLCJfYXBwZW5kQ2hpbGRyZW4iLCJfbmV3SW5wdXQiLCJ0eXBlIiwiY2hlY2tlZCIsIl9uZXdJY29uIiwiaWNvbk5hbWUiLCJpY29uIiwicGFyZW50IiwiY2hpbGQiLCJkb25lQ2JveCIsInVuZGVmaW5lZCIsInRpdGxlSW5wdXQiLCJyZXF1aXJlZCIsImR1ZURhdGVJbnB1dCIsInNlbGVjdExvdyIsInNlbGVjdE1lZCIsInNlbGVjdEhpZ2giLCJwcmlvcml0eUlucHV0IiwiZGVzY0J0biIsImRlbEJ0biIsImRlc2NUZXh0IiwiZGVzY0lucHV0IiwidG9kb0Rlc2MiLCJ0b2dnbGUiLCJ0b2RvQ29udGVudCIsImNvbnRhaW5lciIsInNlbEJ0biIsInNlbElucHV0IiwiZWRpdEJ0biIsImV2dCIsImtleSIsImNvbnNvbGUiLCJsb2ciLCJ0b2RvRm9ybSIsImZvcm1zIiwidG9kb09wZW5CdG4iLCJwcm9qRm9ybSIsInByb2pPcGVuQnRuIiwicGFyZW50Tm9kZSIsInJlc2V0Il0sInNvdXJjZVJvb3QiOiIifQ==