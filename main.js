(()=>{let e,t=[];const d={newProject:function(d){const o=(e=>{let t=[];return{addTodo:e=>{t.push(e)},getTodos:()=>t,title:e,deleteTodo:e=>{t.splice(t.indexOf(e),1),t.reduce(((e,t)=>(t.setPriority(e),e+1)),1)}}})(d);e=o,t.push(o),n.renderProjects()}},n=(()=>{const e=document.querySelector("#project_list");return document.querySelector("#todo_list"),{renderProjects:function(){e.textContent="",t.forEach((t=>{!function(t){const d=o.buildProject(t);e.appendChild(d)}(t)}))}}})(),o=(()=>{function t(e,t,d=null){const n=document.createElement(e);return n.classList.add(...t),d&&function(e,t){t.forEach((t=>{e.appendChild(t)}))}(n,d),n}function d(e){const t=document.createElement("i");return t.classList.add("fas",`fa-${e}`),t}return{buildTodo:function(e){},buildProject:function(o){const s=t("button",["proj-btn","sel-btn"]);s.textContent=o.title,s.addEventListener("click",(()=>{e=o,n.renderTodos(o)}));const r=t("button",["proj-btn","edit-btn"],[d("edit")]),c=t("button",["proj-btn","del-btn"],[d("trash-alt")]);return t("div",["proj"],[s,r,c])}}})();d.newProject("Proj 1");const s=document.forms.todoForm,r=document.querySelector("#new_todo"),c=document.forms.projForm,i=document.querySelector("#new_proj");i.addEventListener("click",(()=>{i.classList.add("hidden"),c.parentNode.classList.remove("hidden")})),c.addEventListener("keydown",(e=>{"Escape"===e.key&&(i.classList.remove("hidden"),c.parentNode.classList.add("hidden"),c.reset())})),c.addEventListener("submit",(()=>{i.classList.remove("hidden"),c.parentNode.classList.add("hidden"),d.newProject(c.title.value),c.reset()})),r.addEventListener("click",(()=>{r.classList.add("hidden"),s.parentNode.classList.remove("hidden")})),s.addEventListener("reset",(()=>{r.classList.remove("hidden"),s.parentNode.classList.add("hidden")})),s.addEventListener("keydown",(e=>{"Escape"===e.key&&(r.classList.remove("hidden"),s.parentNode.classList.add("hidden"))})),s.addEventListener("submit",(()=>{r.classList.remove("hidden"),s.parentNode.classList.add("hidden"),d.newTodo(e,s.title.value,s.date.value,s.done.checked,s.desc.value),s.reset()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoiTUFDQSxJQUNJQSxFQURBQyxFQUFRLEdBR1osTUF1Q01DLEVBeUNLLENBQ0hDLFdBUkosU0FBb0JDLEdBQ2hCLE1BQU1DLEVBOURFLENBQUNELElBQ2IsSUFBSUUsRUFBUyxHQW9CYixNQUFPLENBQ0hDLFFBbkJZQyxJQUNaRixFQUFPRyxLQUFLRCxJQWtCSEUsU0FmSSxJQUFNSixFQWVBRixNQUFBQSxFQUFPTyxXQU5WSCxJQUNoQkYsRUFBT00sT0FBT04sRUFBT08sUUFBUUwsR0FBTyxHQVBwQ0YsRUFBT1EsUUFBTyxDQUFDQyxFQUFHUCxLQUNkQSxFQUFLUSxZQUFZRCxHQUNWQSxFQUFJLElBQ1osTUFpRFVFLENBQVFiLEdBQ3JCSixFQUFlSyxFQUNmSixFQUFNUSxLQUFLSixHQUNYYSxFQUFRQyxtQkFTVkQsRUFBVSxNQUNaLE1BQU1FLEVBQVdDLFNBQVNDLGNBQWMsaUJBNkJ4QyxPQTVCaUJELFNBQVNDLGNBQWMsY0E0QmpDLENBQ0hILGVBUkosV0FDSUMsRUFBU0csWUFBYyxHQUN2QnRCLEVBQU11QixTQUFRbkIsS0FQbEIsU0FBMEJBLEdBQ3RCLE1BQU1vQixFQUFVQyxFQUFlQyxhQUFhdEIsR0FDNUNlLEVBQVNRLFlBQVlILEdBTWpCSSxDQUFpQnhCLFNBMUJiLEdBbUNWcUIsRUFBaUIsTUFpS25CLFNBQVNJLEVBQVlDLEVBQUtDLEVBQVNDLEVBQVMsTUFDeEMsTUFBTUMsRUFBVWIsU0FBU2MsY0FBY0osR0FNdkMsT0FMQUcsRUFBUUUsVUFBVUMsT0FBT0wsR0FDdEJDLEdBZ0JQLFNBQXlCSyxFQUFRTCxHQUM3QkEsRUFBU1QsU0FBUWUsSUFDYkQsRUFBT1YsWUFBWVcsTUFqQm5CQyxDQUFnQk4sRUFBU0QsR0FHdEJDLEVBSVgsU0FBU08sRUFBU0MsR0FDZCxNQUFNQyxFQUFPdEIsU0FBU2MsY0FBYyxLQUdwQyxPQUZBUSxFQUFLUCxVQUFVQyxJQUFJLE1BQU8sTUFBTUssS0FFekJDLEVBVVgsTUFBTyxDQUNIQyxVQTFMSixTQUFtQnBDLEtBMExKbUIsYUE3Q2YsU0FBc0J0QixHQUNsQixNQUFNd0MsRUFBU2YsRUFBWSxTQUFVLENBQUMsV0FBWSxZQUNsRGUsRUFBT3RCLFlBQWNsQixFQUFLRCxNQUMxQnlDLEVBQU9DLGlCQUFpQixTQUFTLEtBQzdCOUMsRUFBZUssRUFDZmEsRUFBUTZCLFlBQVkxQyxNQUd4QixNQUNNMkMsRUFBVWxCLEVBQVksU0FBVSxDQUFDLFdBQVksWUFBYSxDQUQvQ1csRUFBUyxVQUlwQlEsRUFBU25CLEVBQVksU0FBVSxDQUFDLFdBQVksV0FBWSxDQUQ5Q1csRUFBUyxlQUt6QixPQUZrQlgsRUFBWSxNQUFPLENBQUMsUUFBUyxDQUFDZSxFQUFRRyxFQUFTQyxPQTVKbEQsR0FnTXZCL0MsRUFBZUMsV0FBVyxVQUkxQixNQUFNK0MsRUFBVzdCLFNBQVM4QixNQUFNRCxTQUMxQkUsRUFBYy9CLFNBQVNDLGNBQWMsYUFFckMrQixFQUFXaEMsU0FBUzhCLE1BQU1FLFNBQzFCQyxFQUFjakMsU0FBU0MsY0FBYyxhQUUzQ2dDLEVBQVlSLGlCQUFpQixTQUFTLEtBQ2xDUSxFQUFZbEIsVUFBVUMsSUFBSSxVQUMxQmdCLEVBQVNFLFdBQVduQixVQUFVb0IsT0FBTyxhQUd6Q0gsRUFBU1AsaUJBQWlCLFdBQVlXLElBQ25CLFdBQVpBLEVBQUlDLE1BQ0hKLEVBQVlsQixVQUFVb0IsT0FBTyxVQUNqQ0gsRUFBU0UsV0FBV25CLFVBQVVDLElBQUksVUFDOUJnQixFQUFTTSxZQUlqQk4sRUFBU1AsaUJBQWlCLFVBQVUsS0FDaENRLEVBQVlsQixVQUFVb0IsT0FBTyxVQUM3QkgsRUFBU0UsV0FBV25CLFVBQVVDLElBQUksVUFFbENuQyxFQUFlQyxXQUFXa0QsRUFBZ0IsTUFBRU8sT0FFNUNQLEVBQVNNLFdBSWJQLEVBQVlOLGlCQUFpQixTQUFTLEtBQ2xDTSxFQUFZaEIsVUFBVUMsSUFBSSxVQUMxQmEsRUFBU0ssV0FBV25CLFVBQVVvQixPQUFPLGFBR3pDTixFQUFTSixpQkFBaUIsU0FBUyxLQUMvQk0sRUFBWWhCLFVBQVVvQixPQUFPLFVBQzdCTixFQUFTSyxXQUFXbkIsVUFBVUMsSUFBSSxhQUd0Q2EsRUFBU0osaUJBQWlCLFdBQVlXLElBQ25CLFdBQVpBLEVBQUlDLE1BQ0hOLEVBQVloQixVQUFVb0IsT0FBTyxVQUM3Qk4sRUFBU0ssV0FBV25CLFVBQVVDLElBQUksY0FJMUNhLEVBQVNKLGlCQUFpQixVQUFVLEtBQ2hDTSxFQUFZaEIsVUFBVW9CLE9BQU8sVUFDN0JOLEVBQVNLLFdBQVduQixVQUFVQyxJQUFJLFVBRWxDbkMsRUFBZTJELFFBQVE3RCxFQUNBa0QsRUFBZ0IsTUFBRVUsTUFDbEJWLEVBQWUsS0FBRVUsTUFDakJWLEVBQWUsS0FBRVksUUFDakJaLEVBQWUsS0FBRVUsT0FHeENWLEVBQVNTLFkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiXG5sZXQgcHJvanMgPSBbXTtcbmxldCBzZWxlY3RlZFByb2o7XG5cbmNvbnN0IFRvZG8gPSAodGl0bGUsIGR1ZURhdGUsIHByaW9yaXR5LCBpc0RvbmUsIGRlc2NyaXB0aW9uKSA9PiB7XG4gICAgY29uc3Qgc3dpdGNoRG9uZSA9ICgpID0+IHtcbiAgICAgICAgcmV0cy5pc0RvbmUgPSAhcmV0cy5pc0RvbmVcbiAgICB9XG5cbiAgICBjb25zdCByZXRzID0ge1xuICAgICAgICB0aXRsZSwgZHVlRGF0ZSwgcHJpb3JpdHksIGlzRG9uZSwgZGVzY3JpcHRpb24sXG4gICAgICAgIHN3aXRjaERvbmUsXG4gICAgfTtcbiAgICByZXR1cm4gcmV0cztcbn07XG5cbmNvbnN0IFByb2plY3QgPSAodGl0bGUpID0+IHtcbiAgICBsZXQgX3RvZG9zID0gW107XG5cbiAgICBjb25zdCBhZGRUb2RvID0gdG9kbyA9PiB7XG4gICAgICAgIF90b2Rvcy5wdXNoKHRvZG8pO1xuICAgIH07XG5cbiAgICBjb25zdCBnZXRUb2RvcyA9ICgpID0+IF90b2RvcztcblxuICAgIGNvbnN0IF9hcnJhbmdlUHJpb3JpdHkgPSAoKSA9PiB7XG4gICAgICAgIF90b2Rvcy5yZWR1Y2UoKGksIHRvZG8pID0+IHtcbiAgICAgICAgICAgIHRvZG8uc2V0UHJpb3JpdHkoaSk7XG4gICAgICAgICAgICByZXR1cm4gaSArIDE7XG4gICAgICAgIH0sIDEpO1xuICAgIH07XG5cbiAgICBjb25zdCBkZWxldGVUb2RvID0gKHRvZG8pID0+IHtcbiAgICAgICAgX3RvZG9zLnNwbGljZShfdG9kb3MuaW5kZXhPZih0b2RvKSwgMSk7XG4gICAgICAgIF9hcnJhbmdlUHJpb3JpdHkoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgYWRkVG9kbywgZ2V0VG9kb3MsIHRpdGxlLCBkZWxldGVUb2RvXG4gICAgfTtcbn07XG5cblxuY29uc3QgTWFpbkNvbnRyb2xsZXIgPSAoKCkgPT4ge1xuICAgIC8qXG4gICAgZnVuY3Rpb24gbmV3VG9kb19yYXcocHJvaikge1xuICAgICAgICB0b2RvTGlzdCA9IHByb2ouZ2V0VG9kb3MoKTtcblxuICAgICAgICBjb25zdCB0aXRsZSA9IHByb21wdCgnVGFzayBUaXRsZScpO1xuICAgICAgICBjb25zdCBkdWVEYXRlID0gcHJvbXB0KCdEdWUgRGF0ZScpO1xuICAgICAgICBjb25zdCBwcmlvcml0eSA9IHRvZG9MaXN0Lmxlbmd0aCArIDE7XG4gICAgICAgIGNvbnN0IGlzRG9uZSA9IChwcm9tcHQoJ0lzIGl0IGRvbmUgeWV0PycpID09PSAndHJ1ZScpO1xuXG4gICAgICAgIGNvbnN0IGRlc2MgPSBwcm9tcHQoJ0Rlc2NyaXB0aW9uJyk7XG5cbiAgICAgICAgY29uc3QgdG9kbyA9IFRvZG8odGl0bGUsIGR1ZURhdGUsIHByaW9yaXR5LCBpc0RvbmUsIGRlc2MpO1xuICAgICAgICBwcm9qLmFkZFRvZG8odG9kbyk7XG4gICAgICAgIERpc3BsYXkucmVuZGVyVG9kb3MocHJvaik7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbmV3UHJvamVjdF9yYXcoKSB7XG4gICAgICAgIGNvbnN0IHByb2ogPSBQcm9qZWN0KCk7XG4gICAgICAgIHByb2oudGl0bGUgPSBwcm9tcHQoJ1Byb2plY3QgVGl0bGUnKTtcbiAgICAgICAgcHJvanMucHVzaChwcm9qKTtcbiAgICAgICAgRGlzcGxheS5yZW5kZXJQcm9qZWN0cygpO1xuICAgIH1cblxuXG4gICAgZnVuY3Rpb24gbmV3VG9kbyhwcm9qLCB0aXRsZSwgZGF0ZSwgcHJpb3JpdHksIGlzRG9uZSwgZGVzYykge1xuICAgICAgICB0b2RvTGlzdCA9IHByb2ouZ2V0VG9kb3MoKTtcbiAgICAgICAgY29uc3QgdG9kbyA9IFRvZG8odGl0bGUsIGRhdGUsIHByaW9yaXR5LCBpc0RvbmUsIGRlc2MpO1xuXG4gICAgICAgIHByb2ouYWRkVG9kbyh0b2RvKTtcbiAgICAgICAgRGlzcGxheS5yZW5kZXJUb2Rvcyhwcm9qKTtcbiAgICB9XG4gICAgKi9cblxuICAgIGZ1bmN0aW9uIG5ld1Byb2plY3QodGl0bGUpIHtcbiAgICAgICAgY29uc3QgcHJvaiA9IFByb2plY3QodGl0bGUpO1xuICAgICAgICBzZWxlY3RlZFByb2ogPSBwcm9qO1xuICAgICAgICBwcm9qcy5wdXNoKHByb2opO1xuICAgICAgICBEaXNwbGF5LnJlbmRlclByb2plY3RzKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgbmV3UHJvamVjdFxuICAgIH07XG59KSgpO1xuXG5cbmNvbnN0IERpc3BsYXkgPSAoKCkgPT4ge1xuICAgIGNvbnN0IHByb2pMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Byb2plY3RfbGlzdCcpO1xuICAgIGNvbnN0IHRvZG9MaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3RvZG9fbGlzdCcpO1xuXG4gICAgLypcbiAgICBmdW5jdGlvbiBfZGlzcGxheVRvZG8odG9kbykge1xuICAgICAgICBjb25zdCB0b2RvT2JqID0gRWxlbWVudEJ1aWxkZXIuYnVpbGRUb2RvKHRvZG8pO1xuICAgICAgICB0b2RvTGlzdC5hcHBlbmRDaGlsZCh0b2RvT2JqKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZW5kZXJUb2Rvcyhwcm9qKSB7XG4gICAgICAgIHRvZG9MaXN0LnRleHRDb250ZW50ID0gJyc7XG4gICAgICAgIHByb2ouZ2V0VG9kb3MoKS5mb3JFYWNoKHRvZG8gPT4ge1xuICAgICAgICAgICAgX2Rpc3BsYXlUb2RvKHRvZG8pXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAqL1xuXG4gICAgZnVuY3Rpb24gX2Rpc3BsYXlQcm9qZWN0cyhwcm9qKSB7XG4gICAgICAgIGNvbnN0IHByb2pPYmogPSBFbGVtZW50QnVpbGRlci5idWlsZFByb2plY3QocHJvaik7XG4gICAgICAgIHByb2pMaXN0LmFwcGVuZENoaWxkKHByb2pPYmopO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlbmRlclByb2plY3RzKCkge1xuICAgICAgICBwcm9qTGlzdC50ZXh0Q29udGVudCA9ICcnO1xuICAgICAgICBwcm9qcy5mb3JFYWNoKHByb2ogPT4ge1xuICAgICAgICAgICAgX2Rpc3BsYXlQcm9qZWN0cyhwcm9qKVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgICByZW5kZXJQcm9qZWN0c1xuICAgIH07XG59KSgpO1xuXG5jb25zdCBFbGVtZW50QnVpbGRlciA9ICgoKSA9PiB7XG4gICAgZnVuY3Rpb24gYnVpbGRUb2RvKHRvZG8pIHtcbiAgICAgICAgLypcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgICAgICAgY29uc3QgbWFpbkluZm8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgbWFpbkluZm8uY2xhc3NMaXN0LmFkZCgndG9kbycpO1xuXG4gICAgICAgIGNvbnN0IGlzRG9uZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgICAgIGlzRG9uZS50eXBlID0gJ2NoZWNrYm94JztcbiAgICAgICAgaXNEb25lLmNoZWNrZWQgPSB0b2RvLmlzRG9uZTtcblxuXG4gICAgICAgIGNvbnN0IHRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICAgICAgICB0aXRsZS5jbGFzc0xpc3QuYWRkKCd0b2RvLXRpdGxlJyk7XG4gICAgICAgIHRpdGxlLnRleHRDb250ZW50ID0gdG9kby50aXRsZTtcblxuICAgICAgICBjb25zdCB0aXRsZUlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICAgICAgdGl0bGVJbnB1dC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgICAgdGl0bGVJbnB1dC50eXBlID0gJ3RleHQnO1xuICAgICAgICB0aXRsZUlucHV0LnZhbHVlID0gdG9kby50aXRsZTtcblxuICAgICAgICB0aXRsZS5hZGRFdmVudExpc3RlbmVyKCdkYmxjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIHRpdGxlLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgICAgICAgICAgdGl0bGVJbnB1dC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICAgICAgICAgIHRpdGxlSW5wdXQuZm9jdXMoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRpdGxlSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4ge1xuICAgICAgICAgICAgdG9kby50aXRsZSA9IHRpdGxlSW5wdXQudmFsdWU7XG4gICAgICAgICAgICB0aXRsZS50ZXh0Q29udGVudCA9IHRpdGxlSW5wdXQudmFsdWU7XG5cbiAgICAgICAgICAgIHRpdGxlLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgICAgICAgICAgdGl0bGVJbnB1dC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgICAgfSk7XG5cblxuICAgICAgICBjb25zdCBkdWVEYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICAgICAgICBkdWVEYXRlLmNsYXNzTGlzdC5hZGQoJ3RvZG8tZGF0ZScpO1xuICAgICAgICBkdWVEYXRlLnRleHRDb250ZW50ID0gdG9kby5kdWVEYXRlO1xuXG4gICAgICAgIGNvbnN0IGR1ZURhdGVJbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgICAgIGR1ZURhdGVJbnB1dC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgICAgZHVlRGF0ZUlucHV0LnR5cGUgPSAnZGF0ZSc7XG4gICAgICAgIGR1ZURhdGVJbnB1dC52YWx1ZSA9IHRvZG8uZHVlRGF0ZTtcblxuICAgICAgICBkdWVEYXRlLmFkZEV2ZW50TGlzdGVuZXIoJ2RibGNsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgZHVlRGF0ZS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgICAgICAgIGR1ZURhdGVJbnB1dC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICAgICAgICAgIGR1ZURhdGVJbnB1dC5mb2N1cygpO1xuICAgICAgICB9KTtcbiAgICAgICAgZHVlRGF0ZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHtcbiAgICAgICAgICAgIHRvZG8uZHVlRGF0ZSA9IGR1ZURhdGVJbnB1dC52YWx1ZTtcbiAgICAgICAgICAgIGR1ZURhdGUudGV4dENvbnRlbnQgPSBkdWVEYXRlSW5wdXQudmFsdWU7XG5cbiAgICAgICAgICAgIGR1ZURhdGUuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgICAgICAgICBkdWVEYXRlSW5wdXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICAgIH0pO1xuXG5cbiAgICAgICAgY29uc3QgcHJpb3JpdHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgICAgIHByaW9yaXR5LmNsYXNzTGlzdC5hZGQoJ3RvZG8tcHJpb3JpdHknKTtcbiAgICAgICAgcHJpb3JpdHkudGV4dENvbnRlbnQgPSB0b2RvLnByaW9yaXR5O1xuXG5cbiAgICAgICAgY29uc3QgZGVzY0J0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICBkZXNjQnRuLnRleHRDb250ZW50ID0gJ0V4cGFuZCc7XG5cbiAgICAgICAgY29uc3QgZGVsZXRlQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgIGRlbGV0ZUJ0bi50ZXh0Q29udGVudCA9ICdEZWxldGUnO1xuXG4gICAgICAgIGRlbGV0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIHNlbGVjdGVkUHJvai5kZWxldGVUb2RvKHRvZG8pO1xuICAgICAgICAgICAgRGlzcGxheS5yZW5kZXJUb2RvcyhzZWxlY3RlZFByb2opO1xuICAgICAgICB9KTtcblxuXG4gICAgICAgIGNvbnN0IGRlc2MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgZGVzYy5jbGFzc0xpc3QuYWRkKCd0b2RvLWRlc2MnLCAnaGlkZGVuJyk7XG4gICAgICAgIGNvbnN0IGRlc2NUZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICAgICAgICBkZXNjVGV4dC50ZXh0Q29udGVudCA9ICh0b2RvLmRlc2NyaXB0aW9uKSA/IHRvZG8uZGVzY3JpcHRpb24gOiAnTm8gRGVzY3JpcHRpb24uLi4nO1xuICAgICAgICBkZXNjVGV4dC5jbGFzc0xpc3QuYWRkKCd0b2RvLWRlc2MtdGV4dCcpO1xuXG4gICAgICAgIGNvbnN0IGRlc2NJbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RleHRhcmVhJyk7XG4gICAgICAgIGRlc2NJbnB1dC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nLCAndG9kby1lZGl0LXRleHRhcmVhJywgJ3RvZG8tZGVzYy10ZXh0Jyk7XG4gICAgICAgIGRlc2NJbnB1dC52YWx1ZSA9IHRvZG8uZGVzY3JpcHRpb247XG5cbiAgICAgICAgZGVzY1RleHQuYWRkRXZlbnRMaXN0ZW5lcignZGJsY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBkZXNjVGV4dC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgICAgICAgIGRlc2NJbnB1dC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICAgICAgICAgIGRlc2NJbnB1dC5mb2N1cygpXG4gICAgICAgIH0pO1xuICAgICAgICBkZXNjSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4ge1xuICAgICAgICAgICAgdG9kby5kZXNjcmlwdGlvbiA9IGRlc2NJbnB1dC52YWx1ZTtcbiAgICAgICAgICAgIGRlc2NUZXh0LnRleHRDb250ZW50ID0gZGVzY0lucHV0LnZhbHVlO1xuXG4gICAgICAgICAgICBkZXNjVGV4dC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICAgICAgICAgIGRlc2NJbnB1dC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZGVzYy5hcHBlbmRDaGlsZChkZXNjVGV4dCk7XG4gICAgICAgIGRlc2MuYXBwZW5kQ2hpbGQoZGVzY0lucHV0KTtcblxuXG4gICAgICAgIGlzRG9uZS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCB0b2RvLnN3aXRjaERvbmUpO1xuICAgICAgICBkZXNjQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgZGVzYy5jbGFzc0xpc3QudG9nZ2xlKCdoaWRkZW4nKTtcbiAgICAgICAgfSk7XG5cblxuICAgICAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXNvdXQnLCAoKSA9PiB7XG4gICAgICAgICAgICB0aXRsZS5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICAgICAgICAgIHRpdGxlSW5wdXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG5cbiAgICAgICAgICAgIGR1ZURhdGUuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgICAgICAgICBkdWVEYXRlSW5wdXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG5cbiAgICAgICAgICAgIGRlc2NUZXh0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgICAgICAgICAgZGVzY0lucHV0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgICAgICB9KTtcblxuXG4gICAgICAgIG1haW5JbmZvLmFwcGVuZENoaWxkKGlzRG9uZSk7XG5cbiAgICAgICAgbWFpbkluZm8uYXBwZW5kQ2hpbGQodGl0bGUpO1xuICAgICAgICBtYWluSW5mby5hcHBlbmRDaGlsZCh0aXRsZUlucHV0KTtcblxuICAgICAgICBtYWluSW5mby5hcHBlbmRDaGlsZChkdWVEYXRlKTtcbiAgICAgICAgbWFpbkluZm8uYXBwZW5kQ2hpbGQoZHVlRGF0ZUlucHV0KTtcblxuICAgICAgICBtYWluSW5mby5hcHBlbmRDaGlsZChwcmlvcml0eSk7XG5cbiAgICAgICAgbWFpbkluZm8uYXBwZW5kQ2hpbGQoZGVzY0J0bik7XG4gICAgICAgIG1haW5JbmZvLmFwcGVuZENoaWxkKGRlbGV0ZUJ0bik7XG5cblxuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQobWFpbkluZm8pO1xuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoZGVzYyk7XG5cbiAgICAgICAgcmV0dXJuIGNvbnRhaW5lcjtcbiAgICAgICAgKi9cbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gYnVpbGRQcm9qZWN0KHByb2opIHtcbiAgICAgICAgY29uc3Qgc2VsQnRuID0gX25ld0VsZW1lbnQoJ2J1dHRvbicsIFsncHJvai1idG4nLCAnc2VsLWJ0biddKVxuICAgICAgICBzZWxCdG4udGV4dENvbnRlbnQgPSBwcm9qLnRpdGxlO1xuICAgICAgICBzZWxCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBzZWxlY3RlZFByb2ogPSBwcm9qO1xuICAgICAgICAgICAgRGlzcGxheS5yZW5kZXJUb2Rvcyhwcm9qKVxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBlZGl0SWNvbiA9IF9uZXdJY29uKCdlZGl0Jyk7XG4gICAgICAgIGNvbnN0IGVkaXRCdG4gPSBfbmV3RWxlbWVudCgnYnV0dG9uJywgWydwcm9qLWJ0bicsICdlZGl0LWJ0biddLCBbZWRpdEljb25dKVxuXG4gICAgICAgIGNvbnN0IGRlbEljb24gPSBfbmV3SWNvbigndHJhc2gtYWx0Jyk7XG4gICAgICAgIGNvbnN0IGRlbEJ0biA9IF9uZXdFbGVtZW50KCdidXR0b24nLCBbJ3Byb2otYnRuJywgJ2RlbC1idG4nXSwgW2RlbEljb25dKVxuXG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IF9uZXdFbGVtZW50KCdkaXYnLCBbJ3Byb2onXSwgW3NlbEJ0biwgZWRpdEJ0biwgZGVsQnRuXSk7XG5cbiAgICAgICAgcmV0dXJuIGNvbnRhaW5lcjtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBfbmV3RWxlbWVudCh0YWcsIGNsYXNzZXMsIGNoaWxkcmVuPW51bGwpIHtcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnKTtcbiAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKC4uLmNsYXNzZXMpO1xuICAgICAgICBpZihjaGlsZHJlbikge1xuICAgICAgICAgICAgX2FwcGVuZENoaWxkcmVuKGVsZW1lbnQsIGNoaWxkcmVuKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBlbGVtZW50O1xuICAgIH1cblxuXG4gICAgZnVuY3Rpb24gX25ld0ljb24oaWNvbk5hbWUpIHtcbiAgICAgICAgY29uc3QgaWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2knKTtcbiAgICAgICAgaWNvbi5jbGFzc0xpc3QuYWRkKCdmYXMnLCBgZmEtJHtpY29uTmFtZX1gKTtcblxuICAgICAgICByZXR1cm4gaWNvbjtcbiAgICB9XG5cblxuICAgIGZ1bmN0aW9uIF9hcHBlbmRDaGlsZHJlbihwYXJlbnQsIGNoaWxkcmVuKSB7XG4gICAgICAgIGNoaWxkcmVuLmZvckVhY2goY2hpbGQgPT4ge1xuICAgICAgICAgICAgcGFyZW50LmFwcGVuZENoaWxkKGNoaWxkKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgYnVpbGRUb2RvLCBidWlsZFByb2plY3RcbiAgICB9O1xufSkoKTtcblxuXG5NYWluQ29udHJvbGxlci5uZXdQcm9qZWN0KCdQcm9qIDEnKVxuLy8gTWFpbkNvbnRyb2xsZXIubmV3VG9kbyhzZWxlY3RlZFByb2osICdUb2RvIDEnLCAnMDAvMDAvMDAwMCcsICdIaWdoJywgdHJ1ZSwgJ0hlbGxvIFdvcmxkIScpXG5cblxuY29uc3QgdG9kb0Zvcm0gPSBkb2N1bWVudC5mb3Jtcy50b2RvRm9ybTtcbmNvbnN0IHRvZG9PcGVuQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI25ld190b2RvJyk7XG5cbmNvbnN0IHByb2pGb3JtID0gZG9jdW1lbnQuZm9ybXMucHJvakZvcm07XG5jb25zdCBwcm9qT3BlbkJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNuZXdfcHJvaicpO1xuXG5wcm9qT3BlbkJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBwcm9qT3BlbkJ0bi5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICBwcm9qRm9ybS5wYXJlbnROb2RlLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xufSk7XG5cbnByb2pGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZXZ0KSA9PiB7XG4gICAgaWYoZXZ0LmtleSA9PT0gJ0VzY2FwZScpIHtcbiAgICAgICAgcHJvak9wZW5CdG4uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgcHJvakZvcm0ucGFyZW50Tm9kZS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgICAgcHJvakZvcm0ucmVzZXQoKTtcbiAgICB9XG59KTtcblxucHJvakZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKCkgPT4ge1xuICAgIHByb2pPcGVuQnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgIHByb2pGb3JtLnBhcmVudE5vZGUuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG5cbiAgICBNYWluQ29udHJvbGxlci5uZXdQcm9qZWN0KHByb2pGb3JtWyd0aXRsZSddLnZhbHVlKTtcblxuICAgIHByb2pGb3JtLnJlc2V0KCk7XG59KTtcblxuXG50b2RvT3BlbkJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICB0b2RvT3BlbkJ0bi5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICB0b2RvRm9ybS5wYXJlbnROb2RlLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xufSk7XG5cbnRvZG9Gb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2V0JywgKCkgPT4ge1xuICAgIHRvZG9PcGVuQnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgIHRvZG9Gb3JtLnBhcmVudE5vZGUuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG59KTtcblxudG9kb0Zvcm0uYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChldnQpID0+IHtcbiAgICBpZihldnQua2V5ID09PSAnRXNjYXBlJykge1xuICAgICAgICB0b2RvT3BlbkJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICAgICAgdG9kb0Zvcm0ucGFyZW50Tm9kZS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICB9XG59KTtcblxudG9kb0Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKCkgPT4ge1xuICAgIHRvZG9PcGVuQnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgIHRvZG9Gb3JtLnBhcmVudE5vZGUuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG5cbiAgICBNYWluQ29udHJvbGxlci5uZXdUb2RvKHNlbGVjdGVkUHJvaixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvZG9Gb3JtWyd0aXRsZSddLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9kb0Zvcm1bJ2RhdGUnXS52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvZG9Gb3JtWydkb25lJ10uY2hlY2tlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvZG9Gb3JtWydkZXNjJ10udmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuXG4gICAgdG9kb0Zvcm0ucmVzZXQoKTtcbn0pO1xuXG5cbi8qXG5jb25zdCB0b2RvRm9ybUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0b2RvX2Zvcm1fY29udGFpbmVyJyk7XG5jb25zdCB0b2RvRm9ybSA9IGRvY3VtZW50LmZvcm1zLnRvZG9Gb3JtO1xuY29uc3QgdG9kb09wZW5CdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbmV3X3RvZG8nKTtcbnRvZG9PcGVuQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIHRvZG9Gb3JtQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2Zvcm0tb3BlbicpO1xuICAgIHRvZG9PcGVuQnRuLmNsYXNzTGlzdC5hZGQoJ2Zvcm0tb3BlbicpO1xufSk7XG5cbnRvZG9Gb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2V0JywgKCkgPT4ge1xuICAgIHRvZG9Gb3JtQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ2Zvcm0tb3BlbicpO1xuICAgIHRvZG9PcGVuQnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2Zvcm0tb3BlbicpO1xufSk7XG5cbnRvZG9Gb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZXZ0KSA9PiB7XG4gICAgaWYoZXZ0LmtleSA9PT0gJ0VzY2FwZScpIHtcbiAgICAgICAgdG9kb0Zvcm1Db250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnZm9ybS1vcGVuJyk7XG4gICAgICAgIHRvZG9PcGVuQnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2Zvcm0tb3BlbicpO1xuICAgICAgICB0b2RvRm9ybS5yZXNldCgpO1xuICAgIH1cbn0pO1xuXG50b2RvRm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoKSA9PiB7XG4gICAgdG9kb0Zvcm1Db250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnZm9ybS1vcGVuJyk7XG4gICAgdG9kb09wZW5CdG4uY2xhc3NMaXN0LnJlbW92ZSgnZm9ybS1vcGVuJyk7XG5cbiAgICBNYWluQ29udHJvbGxlci5uZXdUb2RvKHNlbGVjdGVkUHJvaixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvZG9Gb3JtWyd0aXRsZSddLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9kb0Zvcm1bJ2RhdGUnXS52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvZG9Gb3JtWydkb25lJ10uY2hlY2tlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvZG9Gb3JtWydkZXNjJ10udmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuXG4gICAgdG9kb0Zvcm0ucmVzZXQoKTtcbn0pO1xuKi8iXSwibmFtZXMiOlsic2VsZWN0ZWRQcm9qIiwicHJvanMiLCJNYWluQ29udHJvbGxlciIsIm5ld1Byb2plY3QiLCJ0aXRsZSIsInByb2oiLCJfdG9kb3MiLCJhZGRUb2RvIiwidG9kbyIsInB1c2giLCJnZXRUb2RvcyIsImRlbGV0ZVRvZG8iLCJzcGxpY2UiLCJpbmRleE9mIiwicmVkdWNlIiwiaSIsInNldFByaW9yaXR5IiwiUHJvamVjdCIsIkRpc3BsYXkiLCJyZW5kZXJQcm9qZWN0cyIsInByb2pMaXN0IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwidGV4dENvbnRlbnQiLCJmb3JFYWNoIiwicHJvak9iaiIsIkVsZW1lbnRCdWlsZGVyIiwiYnVpbGRQcm9qZWN0IiwiYXBwZW5kQ2hpbGQiLCJfZGlzcGxheVByb2plY3RzIiwiX25ld0VsZW1lbnQiLCJ0YWciLCJjbGFzc2VzIiwiY2hpbGRyZW4iLCJlbGVtZW50IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsInBhcmVudCIsImNoaWxkIiwiX2FwcGVuZENoaWxkcmVuIiwiX25ld0ljb24iLCJpY29uTmFtZSIsImljb24iLCJidWlsZFRvZG8iLCJzZWxCdG4iLCJhZGRFdmVudExpc3RlbmVyIiwicmVuZGVyVG9kb3MiLCJlZGl0QnRuIiwiZGVsQnRuIiwidG9kb0Zvcm0iLCJmb3JtcyIsInRvZG9PcGVuQnRuIiwicHJvakZvcm0iLCJwcm9qT3BlbkJ0biIsInBhcmVudE5vZGUiLCJyZW1vdmUiLCJldnQiLCJrZXkiLCJyZXNldCIsInZhbHVlIiwibmV3VG9kbyIsImNoZWNrZWQiXSwic291cmNlUm9vdCI6IiJ9