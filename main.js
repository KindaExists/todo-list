(()=>{let e,t=[];const d=function(e,t,d,n,s){todoList=e.getTodos();const i=((e,t,d,n,o)=>{const s={title:e,dueDate:t,priority:d,isDone:n,description:o,setPriority:e=>{s.priority=e},switchDone:()=>{s.isDone=!s.isDone}};return s})(t,d,todoList.length+1,n,s);e.addTodo(i),o.renderTodos(e)},n=function(d){const n=(e=>{let t=[];return{addTodo:e=>{t.push(e)},getTodos:()=>t,title:e,deleteTodo:e=>{t.splice(t.indexOf(e),1),t.reduce(((e,t)=>(t.setPriority(e),e+1)),1)}}})();n.title=d,e=n,t.push(n),o.renderProjects()},o=(()=>{const e=document.querySelector("#project_list"),d=document.querySelector("#todos_list");return{renderProjects:function(){e.textContent="",t.forEach((t=>{!function(t){const d=s.buildProject(t);e.appendChild(d)}(t)}))},renderTodos:function(e){d.textContent="",e.getTodos().forEach((e=>{!function(e){const t=s.buildTodo(e);d.appendChild(t)}(e)}))}}})(),s={buildTodo:function(t){const d=document.createElement("div"),n=document.createElement("div");n.classList.add("todo");const s=document.createElement("input");s.type="checkbox",s.checked=t.isDone;const i=document.createElement("p");i.classList.add("todo-title"),i.textContent=t.title;const c=document.createElement("input");c.classList.add("hidden"),c.type="text",c.value=t.title,i.addEventListener("dblclick",(()=>{i.classList.add("hidden"),c.classList.remove("hidden"),c.focus()})),c.addEventListener("change",(()=>{t.title=c.value,i.textContent=c.value,i.classList.remove("hidden"),c.classList.add("hidden")}));const a=document.createElement("p");a.classList.add("todo-date"),a.textContent=t.dueDate;const r=document.createElement("input");r.classList.add("hidden"),r.type="date",r.value=t.dueDate,a.addEventListener("dblclick",(()=>{a.classList.add("hidden"),r.classList.remove("hidden"),r.focus()})),r.addEventListener("change",(()=>{t.dueDate=r.value,a.textContent=r.value,a.classList.remove("hidden"),r.classList.add("hidden")}));const l=document.createElement("p");l.classList.add("todo-priority"),l.textContent=t.priority;const u=document.createElement("button");u.textContent="Expand";const m=document.createElement("button");m.textContent="Delete",m.addEventListener("click",(()=>{e.deleteTodo(t),o.renderTodos(e)}));const p=document.createElement("div");p.classList.add("todo-desc","hidden");const L=document.createElement("p");L.textContent=t.description?t.description:"No Description...",L.classList.add("todo-desc-text");const v=document.createElement("textarea");return v.classList.add("hidden","todo-edit-textarea","todo-desc-text"),v.value=t.description,L.addEventListener("dblclick",(()=>{L.classList.add("hidden"),v.classList.remove("hidden"),v.focus()})),v.addEventListener("change",(()=>{t.description=v.value,L.textContent=v.value,L.classList.remove("hidden"),v.classList.add("hidden")})),p.appendChild(L),p.appendChild(v),s.addEventListener("change",t.switchDone),u.addEventListener("click",(()=>{p.classList.toggle("hidden")})),d.addEventListener("focusout",(()=>{i.classList.remove("hidden"),c.classList.add("hidden"),a.classList.remove("hidden"),r.classList.add("hidden"),L.classList.remove("hidden"),v.classList.add("hidden")})),n.appendChild(s),n.appendChild(i),n.appendChild(c),n.appendChild(a),n.appendChild(r),n.appendChild(l),n.appendChild(u),n.appendChild(m),d.appendChild(n),d.appendChild(p),d},buildProject:function(t){const d=document.createElement("div");d.classList.add("proj");const n=document.createElement("button");return n.addEventListener("click",(()=>{e=t,o.renderTodos(t)})),n.textContent=t.title,n.classList.add("proj-btn"),d.appendChild(n),d}},i=document.querySelector("#todo_form_container"),c=document.forms.todoForm,a=document.querySelector("#new_todo");a.addEventListener("click",(()=>{i.classList.add("form-open"),a.classList.add("form-open")})),c.addEventListener("reset",(()=>{i.classList.remove("form-open"),a.classList.remove("form-open")})),c.addEventListener("keydown",(e=>{"Escape"===e.key&&(i.classList.remove("form-open"),a.classList.remove("form-open"),c.reset())})),c.addEventListener("submit",(()=>{i.classList.remove("form-open"),a.classList.remove("form-open"),d(e,c.title.value,c.date.value,c.done.checked,c.desc.value),c.reset()}));const r=document.querySelector("#proj_form_container"),l=document.forms.projForm,u=document.querySelector("#new_project");u.addEventListener("click",(()=>{r.classList.add("form-open"),u.classList.add("form-open")})),l.addEventListener("keydown",(e=>{"Escape"===e.key&&(r.classList.remove("form-open"),u.classList.remove("form-open"),l.reset())})),l.addEventListener("submit",(()=>{r.classList.remove("form-open"),u.classList.remove("form-open"),n(l.title.value),l.reset()})),n("Default")})();