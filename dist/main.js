(()=>{let e,t=[];const d=function(e,t,d,n,o){todoList=e.getTodos();const i=((e,t,d,n,s)=>{const o={title:e,dueDate:t,priority:d,isDone:n,description:s,setPriority:e=>{o.priority=e},switchDone:()=>{o.isDone=!o.isDone}};return o})(t,d,todoList.length+1,n,o);e.addTodo(i),s.renderTodos(e)},n=function(d){const n=(e=>{let t=[];return{addTodo:e=>{t.push(e)},getTodos:()=>t,title:e,deleteTodo:e=>{t.splice(t.indexOf(e),1),t.reduce(((e,t)=>(t.setPriority(e),e+1)),1)}}})();n.title=d,e=n,t.push(n),s.renderProjects()},s=(()=>{const e=document.querySelector("#project_list"),d=document.querySelector("#todos_list");return{renderProjects:function(){e.textContent="",t.forEach((t=>{!function(t){const d=o.buildProject(t);e.appendChild(d)}(t)}))},renderTodos:function(e){d.textContent="",e.getTodos().forEach((e=>{!function(e){const t=o.buildTodo(e);d.appendChild(t)}(e)}))}}})(),o={buildTodo:function(t){const d=document.createElement("div");d.classList.add("todo");const n=document.createElement("input");n.classList.add("checkbox"),n.type="checkbox",n.checked=t.isDone;const o=document.createElement("p");o.classList.add("todo-title"),o.textContent=t.title;const i=document.createElement("input");i.classList.add("hidden"),i.type="text",i.value=t.title,o.addEventListener("dblclick",(()=>{o.classList.add("hidden"),i.classList.remove("hidden"),i.focus()})),i.addEventListener("change",(()=>{t.title=i.value,o.textContent=i.value,o.classList.remove("hidden"),i.classList.add("hidden")}));const c=document.createElement("p");c.classList.add("todo-date"),c.textContent=t.dueDate;const a=document.createElement("input");a.classList.add("hidden"),a.type="date",a.value=t.dueDate,c.addEventListener("dblclick",(()=>{c.classList.add("hidden"),a.classList.remove("hidden"),a.focus()})),a.addEventListener("change",(()=>{t.dueDate=a.value,c.textContent=a.value,c.classList.remove("hidden"),a.classList.add("hidden")}));const r=document.createElement("p");r.classList.add("todo-priority"),r.textContent=t.priority;const l=document.createElement("button");l.textContent="Expand";const u=document.createElement("button");u.textContent="Delete",u.addEventListener("click",(()=>{e.deleteTodo(t),s.renderTodos(e)}));const m=document.createElement("div");m.classList.add("todo-desc","hidden");const p=document.createElement("p");p.textContent=t.description?t.description:"No Description...",p.classList.add("todo-desc-text");const L=document.createElement("textarea");return L.classList.add("hidden","todo-edit-textarea","todo-desc-text"),L.value=t.description,p.addEventListener("dblclick",(()=>{p.classList.add("hidden"),L.classList.remove("hidden"),L.focus()})),L.addEventListener("change",(()=>{t.description=L.value,p.textContent=L.value,p.classList.remove("hidden"),L.classList.add("hidden")})),m.appendChild(p),m.appendChild(L),n.addEventListener("change",t.switchDone),l.addEventListener("click",(()=>{m.classList.toggle("hidden")})),d.addEventListener("focusout",(()=>{o.classList.remove("hidden"),i.classList.add("hidden"),c.classList.remove("hidden"),a.classList.add("hidden"),p.classList.remove("hidden"),L.classList.add("hidden")})),d.appendChild(n),d.appendChild(o),d.appendChild(i),d.appendChild(c),d.appendChild(a),d.appendChild(r),d.appendChild(l),d.appendChild(u),d.appendChild(m),d},buildProject:function(t){const d=document.createElement("div");d.classList.add("proj");const n=document.createElement("button");return n.addEventListener("click",(()=>{e=t,s.renderTodos(t)})),n.textContent=t.title,n.classList.add("proj-btn"),d.appendChild(n),d}},i=document.querySelector("#todo_form_container"),c=document.forms.todoForm,a=document.querySelector("#new_todo");a.addEventListener("click",(()=>{i.classList.add("form-open"),a.classList.add("form-open")})),c.addEventListener("reset",(()=>{i.classList.remove("form-open"),a.classList.remove("form-open")})),c.addEventListener("keydown",(e=>{"Escape"===e.key&&(i.classList.remove("form-open"),a.classList.remove("form-open"),c.reset())})),c.addEventListener("submit",(()=>{i.classList.remove("form-open"),a.classList.remove("form-open"),d(e,c.title.value,c.date.value,c.done.checked,c.desc.value),c.reset()}));const r=document.querySelector("#proj_form_container"),l=document.forms.projForm,u=document.querySelector("#new_project");u.addEventListener("click",(()=>{r.classList.add("form-open"),u.classList.add("form-open")})),l.addEventListener("keydown",(e=>{"Escape"===e.key&&(r.classList.remove("form-open"),u.classList.remove("form-open"),l.reset())})),l.addEventListener("submit",(()=>{r.classList.remove("form-open"),u.classList.remove("form-open"),n(l.title.value),l.reset()})),n("Default")})();