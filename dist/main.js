(()=>{let e,t=[];const d={newProject:function(d){const s=(e=>{let t=[];return{addTodo:e=>{t.push(e)},getTodos:()=>t,title:e,deleteTodo:e=>{t.splice(t.indexOf(e),1),t.reduce(((e,t)=>(t.setPriority(e),e+1)),1)}}})(d);e=s,t.push(s),n.renderProjects()}},n=(()=>{const e=document.querySelector("#project_list");return document.querySelector("#todo_list"),{renderProjects:function(){e.textContent="",t.forEach((t=>{!function(t){const d=s.buildProject(t);e.appendChild(d)}(t)}))}}})(),s=(()=>{function t(e,t,d=null){const n=document.createElement(e);return n.classList.add(...t),d&&function(e,t){t.forEach((t=>{e.appendChild(t)}))}(n,d),n}function d(e){const t=document.createElement("i");return t.classList.add("fas",`fa-${e}`),t}return{buildTodo:function(e){},buildProject:function(s){const o=t("button",["proj-btn","sel-btn"]);o.textContent=s.title,o.addEventListener("click",(()=>{e=s,n.renderTodos(s)}));const r=t("button",["proj-btn","edit-btn"],[d("edit")]),i=t("button",["proj-btn","del-btn"],[d("trash-alt")]);return t("div",["proj"],[o,r,i])}}})(),o=document.forms.todoForm,r=document.querySelector("#new_todo"),i=document.forms.projForm,c=document.querySelector("#new_proj");c.addEventListener("click",(()=>{c.classList.add("hidden"),i.parentNode.classList.remove("hidden"),i.children[0].focus()})),i.addEventListener("keydown",(e=>{"Escape"===e.key&&(c.classList.remove("hidden"),i.parentNode.classList.add("hidden"),i.reset())})),i.addEventListener("focusout",(e=>{c.classList.remove("hidden"),i.parentNode.classList.add("hidden"),i.reset()})),i.addEventListener("submit",(()=>{c.classList.remove("hidden"),i.parentNode.classList.add("hidden"),d.newProject(i.title.value),i.reset()})),r.addEventListener("click",(()=>{r.classList.add("hidden"),o.parentNode.classList.remove("hidden")})),o.addEventListener("reset",(()=>{r.classList.remove("hidden"),o.parentNode.classList.add("hidden")})),o.addEventListener("keydown",(e=>{"Escape"===e.key&&(r.classList.remove("hidden"),o.parentNode.classList.add("hidden"))})),o.addEventListener("submit",(()=>{r.classList.remove("hidden"),o.parentNode.classList.add("hidden"),d.newTodo(e,o.title.value,o.date.value,o.done.checked,o.desc.value),o.reset()})),d.newProject("Proj 1")})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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U0FBUyxLQUNsQ00sRUFBWWhCLFVBQVVDLElBQUksVUFDMUJhLEVBQVNLLFdBQVduQixVQUFVb0IsT0FBTyxhQUd6Q04sRUFBU0osaUJBQWlCLFNBQVMsS0FDL0JNLEVBQVloQixVQUFVb0IsT0FBTyxVQUM3Qk4sRUFBU0ssV0FBV25CLFVBQVVDLElBQUksYUFHdENhLEVBQVNKLGlCQUFpQixXQUFZWSxJQUNuQixXQUFaQSxFQUFJQyxNQUNIUCxFQUFZaEIsVUFBVW9CLE9BQU8sVUFDN0JOLEVBQVNLLFdBQVduQixVQUFVQyxJQUFJLGNBSTFDYSxFQUFTSixpQkFBaUIsVUFBVSxLQUNoQ00sRUFBWWhCLFVBQVVvQixPQUFPLFVBQzdCTixFQUFTSyxXQUFXbkIsVUFBVUMsSUFBSSxVQUVsQ25DLEVBQWU0RCxRQUFROUQsRUFDQWtELEVBQWdCLE1BQUVXLE1BQ2xCWCxFQUFlLEtBQUVXLE1BQ2pCWCxFQUFlLEtBQUVhLFFBQ2pCYixFQUFlLEtBQUVXLE9BR3hDWCxFQUFTVSxXQU1iMUQsRUFBZUMsV0FBVyxXIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlxubGV0IHByb2pzID0gW107XG5sZXQgc2VsZWN0ZWRQcm9qO1xuXG5jb25zdCBUb2RvID0gKHRpdGxlLCBkdWVEYXRlLCBwcmlvcml0eSwgaXNEb25lLCBkZXNjcmlwdGlvbikgPT4ge1xuICAgIGNvbnN0IHN3aXRjaERvbmUgPSAoKSA9PiB7XG4gICAgICAgIHJldHMuaXNEb25lID0gIXJldHMuaXNEb25lXG4gICAgfVxuXG4gICAgY29uc3QgcmV0cyA9IHtcbiAgICAgICAgdGl0bGUsIGR1ZURhdGUsIHByaW9yaXR5LCBpc0RvbmUsIGRlc2NyaXB0aW9uLFxuICAgICAgICBzd2l0Y2hEb25lLFxuICAgIH07XG4gICAgcmV0dXJuIHJldHM7XG59O1xuXG5jb25zdCBQcm9qZWN0ID0gKHRpdGxlKSA9PiB7XG4gICAgbGV0IF90b2RvcyA9IFtdO1xuXG4gICAgY29uc3QgYWRkVG9kbyA9IHRvZG8gPT4ge1xuICAgICAgICBfdG9kb3MucHVzaCh0b2RvKTtcbiAgICB9O1xuXG4gICAgY29uc3QgZ2V0VG9kb3MgPSAoKSA9PiBfdG9kb3M7XG5cbiAgICBjb25zdCBfYXJyYW5nZVByaW9yaXR5ID0gKCkgPT4ge1xuICAgICAgICBfdG9kb3MucmVkdWNlKChpLCB0b2RvKSA9PiB7XG4gICAgICAgICAgICB0b2RvLnNldFByaW9yaXR5KGkpO1xuICAgICAgICAgICAgcmV0dXJuIGkgKyAxO1xuICAgICAgICB9LCAxKTtcbiAgICB9O1xuXG4gICAgY29uc3QgZGVsZXRlVG9kbyA9ICh0b2RvKSA9PiB7XG4gICAgICAgIF90b2Rvcy5zcGxpY2UoX3RvZG9zLmluZGV4T2YodG9kbyksIDEpO1xuICAgICAgICBfYXJyYW5nZVByaW9yaXR5KCk7XG4gICAgfTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIGFkZFRvZG8sIGdldFRvZG9zLCB0aXRsZSwgZGVsZXRlVG9kb1xuICAgIH07XG59O1xuXG5cbmNvbnN0IE1haW5Db250cm9sbGVyID0gKCgpID0+IHtcbiAgICAvKlxuICAgIGZ1bmN0aW9uIG5ld1RvZG9fcmF3KHByb2opIHtcbiAgICAgICAgdG9kb0xpc3QgPSBwcm9qLmdldFRvZG9zKCk7XG5cbiAgICAgICAgY29uc3QgdGl0bGUgPSBwcm9tcHQoJ1Rhc2sgVGl0bGUnKTtcbiAgICAgICAgY29uc3QgZHVlRGF0ZSA9IHByb21wdCgnRHVlIERhdGUnKTtcbiAgICAgICAgY29uc3QgcHJpb3JpdHkgPSB0b2RvTGlzdC5sZW5ndGggKyAxO1xuICAgICAgICBjb25zdCBpc0RvbmUgPSAocHJvbXB0KCdJcyBpdCBkb25lIHlldD8nKSA9PT0gJ3RydWUnKTtcblxuICAgICAgICBjb25zdCBkZXNjID0gcHJvbXB0KCdEZXNjcmlwdGlvbicpO1xuXG4gICAgICAgIGNvbnN0IHRvZG8gPSBUb2RvKHRpdGxlLCBkdWVEYXRlLCBwcmlvcml0eSwgaXNEb25lLCBkZXNjKTtcbiAgICAgICAgcHJvai5hZGRUb2RvKHRvZG8pO1xuICAgICAgICBEaXNwbGF5LnJlbmRlclRvZG9zKHByb2opO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG5ld1Byb2plY3RfcmF3KCkge1xuICAgICAgICBjb25zdCBwcm9qID0gUHJvamVjdCgpO1xuICAgICAgICBwcm9qLnRpdGxlID0gcHJvbXB0KCdQcm9qZWN0IFRpdGxlJyk7XG4gICAgICAgIHByb2pzLnB1c2gocHJvaik7XG4gICAgICAgIERpc3BsYXkucmVuZGVyUHJvamVjdHMoKTtcbiAgICB9XG5cblxuICAgIGZ1bmN0aW9uIG5ld1RvZG8ocHJvaiwgdGl0bGUsIGRhdGUsIHByaW9yaXR5LCBpc0RvbmUsIGRlc2MpIHtcbiAgICAgICAgdG9kb0xpc3QgPSBwcm9qLmdldFRvZG9zKCk7XG4gICAgICAgIGNvbnN0IHRvZG8gPSBUb2RvKHRpdGxlLCBkYXRlLCBwcmlvcml0eSwgaXNEb25lLCBkZXNjKTtcblxuICAgICAgICBwcm9qLmFkZFRvZG8odG9kbyk7XG4gICAgICAgIERpc3BsYXkucmVuZGVyVG9kb3MocHJvaik7XG4gICAgfVxuICAgICovXG5cbiAgICBmdW5jdGlvbiBuZXdQcm9qZWN0KHRpdGxlKSB7XG4gICAgICAgIGNvbnN0IHByb2ogPSBQcm9qZWN0KHRpdGxlKTtcbiAgICAgICAgc2VsZWN0ZWRQcm9qID0gcHJvajtcbiAgICAgICAgcHJvanMucHVzaChwcm9qKTtcbiAgICAgICAgRGlzcGxheS5yZW5kZXJQcm9qZWN0cygpO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIG5ld1Byb2plY3RcbiAgICB9O1xufSkoKTtcblxuXG5jb25zdCBEaXNwbGF5ID0gKCgpID0+IHtcbiAgICBjb25zdCBwcm9qTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcm9qZWN0X2xpc3QnKTtcbiAgICBjb25zdCB0b2RvTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0b2RvX2xpc3QnKTtcblxuICAgIC8qXG4gICAgZnVuY3Rpb24gX2Rpc3BsYXlUb2RvKHRvZG8pIHtcbiAgICAgICAgY29uc3QgdG9kb09iaiA9IEVsZW1lbnRCdWlsZGVyLmJ1aWxkVG9kbyh0b2RvKTtcbiAgICAgICAgdG9kb0xpc3QuYXBwZW5kQ2hpbGQodG9kb09iaik7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVuZGVyVG9kb3MocHJvaikge1xuICAgICAgICB0b2RvTGlzdC50ZXh0Q29udGVudCA9ICcnO1xuICAgICAgICBwcm9qLmdldFRvZG9zKCkuZm9yRWFjaCh0b2RvID0+IHtcbiAgICAgICAgICAgIF9kaXNwbGF5VG9kbyh0b2RvKVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgKi9cblxuICAgIGZ1bmN0aW9uIF9kaXNwbGF5UHJvamVjdHMocHJvaikge1xuICAgICAgICBjb25zdCBwcm9qT2JqID0gRWxlbWVudEJ1aWxkZXIuYnVpbGRQcm9qZWN0KHByb2opO1xuICAgICAgICBwcm9qTGlzdC5hcHBlbmRDaGlsZChwcm9qT2JqKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZW5kZXJQcm9qZWN0cygpIHtcbiAgICAgICAgcHJvakxpc3QudGV4dENvbnRlbnQgPSAnJztcbiAgICAgICAgcHJvanMuZm9yRWFjaChwcm9qID0+IHtcbiAgICAgICAgICAgIF9kaXNwbGF5UHJvamVjdHMocHJvailcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVuZGVyUHJvamVjdHNcbiAgICB9O1xufSkoKTtcblxuY29uc3QgRWxlbWVudEJ1aWxkZXIgPSAoKCkgPT4ge1xuICAgIGZ1bmN0aW9uIGJ1aWxkVG9kbyh0b2RvKSB7XG4gICAgICAgIC8qXG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgICAgIGNvbnN0IG1haW5JbmZvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIG1haW5JbmZvLmNsYXNzTGlzdC5hZGQoJ3RvZG8nKTtcblxuICAgICAgICBjb25zdCBpc0RvbmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgICBpc0RvbmUudHlwZSA9ICdjaGVja2JveCc7XG4gICAgICAgIGlzRG9uZS5jaGVja2VkID0gdG9kby5pc0RvbmU7XG5cblxuICAgICAgICBjb25zdCB0aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgICAgICAgdGl0bGUuY2xhc3NMaXN0LmFkZCgndG9kby10aXRsZScpO1xuICAgICAgICB0aXRsZS50ZXh0Q29udGVudCA9IHRvZG8udGl0bGU7XG5cbiAgICAgICAgY29uc3QgdGl0bGVJbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgICAgIHRpdGxlSW5wdXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICAgIHRpdGxlSW5wdXQudHlwZSA9ICd0ZXh0JztcbiAgICAgICAgdGl0bGVJbnB1dC52YWx1ZSA9IHRvZG8udGl0bGU7XG5cbiAgICAgICAgdGl0bGUuYWRkRXZlbnRMaXN0ZW5lcignZGJsY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICB0aXRsZS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgICAgICAgIHRpdGxlSW5wdXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgICAgICAgICB0aXRsZUlucHV0LmZvY3VzKCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aXRsZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHtcbiAgICAgICAgICAgIHRvZG8udGl0bGUgPSB0aXRsZUlucHV0LnZhbHVlO1xuICAgICAgICAgICAgdGl0bGUudGV4dENvbnRlbnQgPSB0aXRsZUlucHV0LnZhbHVlO1xuXG4gICAgICAgICAgICB0aXRsZS5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICAgICAgICAgIHRpdGxlSW5wdXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICAgIH0pO1xuXG5cbiAgICAgICAgY29uc3QgZHVlRGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgICAgICAgZHVlRGF0ZS5jbGFzc0xpc3QuYWRkKCd0b2RvLWRhdGUnKTtcbiAgICAgICAgZHVlRGF0ZS50ZXh0Q29udGVudCA9IHRvZG8uZHVlRGF0ZTtcblxuICAgICAgICBjb25zdCBkdWVEYXRlSW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgICBkdWVEYXRlSW5wdXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICAgIGR1ZURhdGVJbnB1dC50eXBlID0gJ2RhdGUnO1xuICAgICAgICBkdWVEYXRlSW5wdXQudmFsdWUgPSB0b2RvLmR1ZURhdGU7XG5cbiAgICAgICAgZHVlRGF0ZS5hZGRFdmVudExpc3RlbmVyKCdkYmxjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIGR1ZURhdGUuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICAgICAgICBkdWVEYXRlSW5wdXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgICAgICAgICBkdWVEYXRlSW5wdXQuZm9jdXMoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGR1ZURhdGVJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7XG4gICAgICAgICAgICB0b2RvLmR1ZURhdGUgPSBkdWVEYXRlSW5wdXQudmFsdWU7XG4gICAgICAgICAgICBkdWVEYXRlLnRleHRDb250ZW50ID0gZHVlRGF0ZUlucHV0LnZhbHVlO1xuXG4gICAgICAgICAgICBkdWVEYXRlLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgICAgICAgICAgZHVlRGF0ZUlucHV0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgICAgICB9KTtcblxuXG4gICAgICAgIGNvbnN0IHByaW9yaXR5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICAgICAgICBwcmlvcml0eS5jbGFzc0xpc3QuYWRkKCd0b2RvLXByaW9yaXR5Jyk7XG4gICAgICAgIHByaW9yaXR5LnRleHRDb250ZW50ID0gdG9kby5wcmlvcml0eTtcblxuXG4gICAgICAgIGNvbnN0IGRlc2NCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgZGVzY0J0bi50ZXh0Q29udGVudCA9ICdFeHBhbmQnO1xuXG4gICAgICAgIGNvbnN0IGRlbGV0ZUJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICBkZWxldGVCdG4udGV4dENvbnRlbnQgPSAnRGVsZXRlJztcblxuICAgICAgICBkZWxldGVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBzZWxlY3RlZFByb2ouZGVsZXRlVG9kbyh0b2RvKTtcbiAgICAgICAgICAgIERpc3BsYXkucmVuZGVyVG9kb3Moc2VsZWN0ZWRQcm9qKTtcbiAgICAgICAgfSk7XG5cblxuICAgICAgICBjb25zdCBkZXNjID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGRlc2MuY2xhc3NMaXN0LmFkZCgndG9kby1kZXNjJywgJ2hpZGRlbicpO1xuICAgICAgICBjb25zdCBkZXNjVGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgICAgICAgZGVzY1RleHQudGV4dENvbnRlbnQgPSAodG9kby5kZXNjcmlwdGlvbikgPyB0b2RvLmRlc2NyaXB0aW9uIDogJ05vIERlc2NyaXB0aW9uLi4uJztcbiAgICAgICAgZGVzY1RleHQuY2xhc3NMaXN0LmFkZCgndG9kby1kZXNjLXRleHQnKTtcblxuICAgICAgICBjb25zdCBkZXNjSW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScpO1xuICAgICAgICBkZXNjSW5wdXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJywgJ3RvZG8tZWRpdC10ZXh0YXJlYScsICd0b2RvLWRlc2MtdGV4dCcpO1xuICAgICAgICBkZXNjSW5wdXQudmFsdWUgPSB0b2RvLmRlc2NyaXB0aW9uO1xuXG4gICAgICAgIGRlc2NUZXh0LmFkZEV2ZW50TGlzdGVuZXIoJ2RibGNsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgZGVzY1RleHQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICAgICAgICBkZXNjSW5wdXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgICAgICAgICBkZXNjSW5wdXQuZm9jdXMoKVxuICAgICAgICB9KTtcbiAgICAgICAgZGVzY0lucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHtcbiAgICAgICAgICAgIHRvZG8uZGVzY3JpcHRpb24gPSBkZXNjSW5wdXQudmFsdWU7XG4gICAgICAgICAgICBkZXNjVGV4dC50ZXh0Q29udGVudCA9IGRlc2NJbnB1dC52YWx1ZTtcblxuICAgICAgICAgICAgZGVzY1RleHQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgICAgICAgICBkZXNjSW5wdXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGRlc2MuYXBwZW5kQ2hpbGQoZGVzY1RleHQpO1xuICAgICAgICBkZXNjLmFwcGVuZENoaWxkKGRlc2NJbnB1dCk7XG5cblxuICAgICAgICBpc0RvbmUuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgdG9kby5zd2l0Y2hEb25lKTtcbiAgICAgICAgZGVzY0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIGRlc2MuY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZGVuJyk7XG4gICAgICAgIH0pO1xuXG5cbiAgICAgICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3Vzb3V0JywgKCkgPT4ge1xuICAgICAgICAgICAgdGl0bGUuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgICAgICAgICB0aXRsZUlucHV0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuXG4gICAgICAgICAgICBkdWVEYXRlLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgICAgICAgICAgZHVlRGF0ZUlucHV0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuXG4gICAgICAgICAgICBkZXNjVGV4dC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICAgICAgICAgIGRlc2NJbnB1dC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgICAgfSk7XG5cblxuICAgICAgICBtYWluSW5mby5hcHBlbmRDaGlsZChpc0RvbmUpO1xuXG4gICAgICAgIG1haW5JbmZvLmFwcGVuZENoaWxkKHRpdGxlKTtcbiAgICAgICAgbWFpbkluZm8uYXBwZW5kQ2hpbGQodGl0bGVJbnB1dCk7XG5cbiAgICAgICAgbWFpbkluZm8uYXBwZW5kQ2hpbGQoZHVlRGF0ZSk7XG4gICAgICAgIG1haW5JbmZvLmFwcGVuZENoaWxkKGR1ZURhdGVJbnB1dCk7XG5cbiAgICAgICAgbWFpbkluZm8uYXBwZW5kQ2hpbGQocHJpb3JpdHkpO1xuXG4gICAgICAgIG1haW5JbmZvLmFwcGVuZENoaWxkKGRlc2NCdG4pO1xuICAgICAgICBtYWluSW5mby5hcHBlbmRDaGlsZChkZWxldGVCdG4pO1xuXG5cbiAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKG1haW5JbmZvKTtcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGRlc2MpO1xuXG4gICAgICAgIHJldHVybiBjb250YWluZXI7XG4gICAgICAgICovXG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIGJ1aWxkUHJvamVjdChwcm9qKSB7XG4gICAgICAgIGNvbnN0IHNlbEJ0biA9IF9uZXdFbGVtZW50KCdidXR0b24nLCBbJ3Byb2otYnRuJywgJ3NlbC1idG4nXSlcbiAgICAgICAgc2VsQnRuLnRleHRDb250ZW50ID0gcHJvai50aXRsZTtcbiAgICAgICAgc2VsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgc2VsZWN0ZWRQcm9qID0gcHJvajtcbiAgICAgICAgICAgIERpc3BsYXkucmVuZGVyVG9kb3MocHJvailcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgZWRpdEljb24gPSBfbmV3SWNvbignZWRpdCcpO1xuICAgICAgICBjb25zdCBlZGl0QnRuID0gX25ld0VsZW1lbnQoJ2J1dHRvbicsIFsncHJvai1idG4nLCAnZWRpdC1idG4nXSwgW2VkaXRJY29uXSlcblxuICAgICAgICBjb25zdCBkZWxJY29uID0gX25ld0ljb24oJ3RyYXNoLWFsdCcpO1xuICAgICAgICBjb25zdCBkZWxCdG4gPSBfbmV3RWxlbWVudCgnYnV0dG9uJywgWydwcm9qLWJ0bicsICdkZWwtYnRuJ10sIFtkZWxJY29uXSlcblxuICAgICAgICBjb25zdCBjb250YWluZXIgPSBfbmV3RWxlbWVudCgnZGl2JywgWydwcm9qJ10sIFtzZWxCdG4sIGVkaXRCdG4sIGRlbEJ0bl0pO1xuXG4gICAgICAgIHJldHVybiBjb250YWluZXI7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gX25ld0VsZW1lbnQodGFnLCBjbGFzc2VzLCBjaGlsZHJlbj1udWxsKSB7XG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZyk7XG4gICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCguLi5jbGFzc2VzKTtcbiAgICAgICAgaWYoY2hpbGRyZW4pIHtcbiAgICAgICAgICAgIF9hcHBlbmRDaGlsZHJlbihlbGVtZW50LCBjaGlsZHJlbik7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZWxlbWVudDtcbiAgICB9XG5cblxuICAgIGZ1bmN0aW9uIF9uZXdJY29uKGljb25OYW1lKSB7XG4gICAgICAgIGNvbnN0IGljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpJyk7XG4gICAgICAgIGljb24uY2xhc3NMaXN0LmFkZCgnZmFzJywgYGZhLSR7aWNvbk5hbWV9YCk7XG5cbiAgICAgICAgcmV0dXJuIGljb247XG4gICAgfVxuXG5cbiAgICBmdW5jdGlvbiBfYXBwZW5kQ2hpbGRyZW4ocGFyZW50LCBjaGlsZHJlbikge1xuICAgICAgICBjaGlsZHJlbi5mb3JFYWNoKGNoaWxkID0+IHtcbiAgICAgICAgICAgIHBhcmVudC5hcHBlbmRDaGlsZChjaGlsZCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIGJ1aWxkVG9kbywgYnVpbGRQcm9qZWN0XG4gICAgfTtcbn0pKCk7XG5cblxuY29uc3QgdG9kb0Zvcm0gPSBkb2N1bWVudC5mb3Jtcy50b2RvRm9ybTtcbmNvbnN0IHRvZG9PcGVuQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI25ld190b2RvJyk7XG5cbmNvbnN0IHByb2pGb3JtID0gZG9jdW1lbnQuZm9ybXMucHJvakZvcm07XG5jb25zdCBwcm9qT3BlbkJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNuZXdfcHJvaicpO1xuXG5wcm9qT3BlbkJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBwcm9qT3BlbkJ0bi5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICBwcm9qRm9ybS5wYXJlbnROb2RlLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgIHByb2pGb3JtLmNoaWxkcmVuWzBdLmZvY3VzKCk7XG59KTtcblxucHJvakZvcm0uYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChldnQpID0+IHtcbiAgICBpZihldnQua2V5ID09PSAnRXNjYXBlJykge1xuICAgICAgICBwcm9qT3BlbkJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICAgICAgcHJvakZvcm0ucGFyZW50Tm9kZS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgICAgcHJvakZvcm0ucmVzZXQoKTtcbiAgICB9XG59KTtcblxucHJvakZvcm0uYWRkRXZlbnRMaXN0ZW5lcignZm9jdXNvdXQnLCAoZXZ0KSA9PiB7XG4gICAgcHJvak9wZW5CdG4uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgcHJvakZvcm0ucGFyZW50Tm9kZS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICBwcm9qRm9ybS5yZXNldCgpO1xufSk7XG5cbnByb2pGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsICgpID0+IHtcbiAgICBwcm9qT3BlbkJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICBwcm9qRm9ybS5wYXJlbnROb2RlLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuXG4gICAgTWFpbkNvbnRyb2xsZXIubmV3UHJvamVjdChwcm9qRm9ybVsndGl0bGUnXS52YWx1ZSk7XG5cbiAgICBwcm9qRm9ybS5yZXNldCgpO1xufSk7XG5cblxudG9kb09wZW5CdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgdG9kb09wZW5CdG4uY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgdG9kb0Zvcm0ucGFyZW50Tm9kZS5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbn0pO1xuXG50b2RvRm9ybS5hZGRFdmVudExpc3RlbmVyKCdyZXNldCcsICgpID0+IHtcbiAgICB0b2RvT3BlbkJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICB0b2RvRm9ybS5wYXJlbnROb2RlLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xufSk7XG5cbnRvZG9Gb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZXZ0KSA9PiB7XG4gICAgaWYoZXZ0LmtleSA9PT0gJ0VzY2FwZScpIHtcbiAgICAgICAgdG9kb09wZW5CdG4uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgICAgIHRvZG9Gb3JtLnBhcmVudE5vZGUuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgfVxufSk7XG5cbnRvZG9Gb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsICgpID0+IHtcbiAgICB0b2RvT3BlbkJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICB0b2RvRm9ybS5wYXJlbnROb2RlLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuXG4gICAgTWFpbkNvbnRyb2xsZXIubmV3VG9kbyhzZWxlY3RlZFByb2osXG4gICAgICAgICAgICAgICAgICAgICAgICAgICB0b2RvRm9ybVsndGl0bGUnXS52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvZG9Gb3JtWydkYXRlJ10udmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICB0b2RvRm9ybVsnZG9uZSddLmNoZWNrZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICB0b2RvRm9ybVsnZGVzYyddLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgIHRvZG9Gb3JtLnJlc2V0KCk7XG59KTtcblxuXG5cblxuTWFpbkNvbnRyb2xsZXIubmV3UHJvamVjdCgnUHJvaiAxJylcbi8vIE1haW5Db250cm9sbGVyLm5ld1RvZG8oc2VsZWN0ZWRQcm9qLCAnVG9kbyAxJywgJzAwLzAwLzAwMDAnLCAnSGlnaCcsIHRydWUsICdIZWxsbyBXb3JsZCEnKSJdLCJuYW1lcyI6WyJzZWxlY3RlZFByb2oiLCJwcm9qcyIsIk1haW5Db250cm9sbGVyIiwibmV3UHJvamVjdCIsInRpdGxlIiwicHJvaiIsIl90b2RvcyIsImFkZFRvZG8iLCJ0b2RvIiwicHVzaCIsImdldFRvZG9zIiwiZGVsZXRlVG9kbyIsInNwbGljZSIsImluZGV4T2YiLCJyZWR1Y2UiLCJpIiwic2V0UHJpb3JpdHkiLCJQcm9qZWN0IiwiRGlzcGxheSIsInJlbmRlclByb2plY3RzIiwicHJvakxpc3QiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJ0ZXh0Q29udGVudCIsImZvckVhY2giLCJwcm9qT2JqIiwiRWxlbWVudEJ1aWxkZXIiLCJidWlsZFByb2plY3QiLCJhcHBlbmRDaGlsZCIsIl9kaXNwbGF5UHJvamVjdHMiLCJfbmV3RWxlbWVudCIsInRhZyIsImNsYXNzZXMiLCJjaGlsZHJlbiIsImVsZW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwicGFyZW50IiwiY2hpbGQiLCJfYXBwZW5kQ2hpbGRyZW4iLCJfbmV3SWNvbiIsImljb25OYW1lIiwiaWNvbiIsImJ1aWxkVG9kbyIsInNlbEJ0biIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW5kZXJUb2RvcyIsImVkaXRCdG4iLCJkZWxCdG4iLCJ0b2RvRm9ybSIsImZvcm1zIiwidG9kb09wZW5CdG4iLCJwcm9qRm9ybSIsInByb2pPcGVuQnRuIiwicGFyZW50Tm9kZSIsInJlbW92ZSIsImZvY3VzIiwiZXZ0Iiwia2V5IiwicmVzZXQiLCJ2YWx1ZSIsIm5ld1RvZG8iLCJjaGVja2VkIl0sInNvdXJjZVJvb3QiOiIifQ==